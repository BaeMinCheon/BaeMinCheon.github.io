<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>LET US GO ABROAD</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://baemincheon.github.io/"/>
  <updated>2021-03-16T15:31:41.547Z</updated>
  <id>https://baemincheon.github.io/</id>
  
  <author>
    <name>MinCheon Bae</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>unreal-engine-natvis</title>
    <link href="https://baemincheon.github.io/2021/03/01/unreal-engine-natvis/"/>
    <id>https://baemincheon.github.io/2021/03/01/unreal-engine-natvis/</id>
    <published>2021-03-01T13:10:07.000Z</published>
    <updated>2021-03-16T15:31:41.547Z</updated>
    
    <content type="html"><![CDATA[<ul><li>this post covers<ul><li>what is Natvis</li><li>how to write custom Natvis visualization</li><li>customization in UnrealEngine</li></ul></li><li>environment<ul><li>Unreal Engine 4 <code>ver. 4.25</code></li><li>Visual Studio 2019 <code>ver. 16.8.1</code></li></ul></li><li>reference<ol><li><a href="https://docs.microsoft.com/en-us/visualstudio/debugger/create-custom-views-of-native-objects?view=vs-2019" target="_blank" rel="noopener">https://docs.microsoft.com/en-us/visualstudio/debugger/create-custom-views-of-native-objects?view=vs-2019</a></li><li><a href="https://docs.microsoft.com/en-us/previous-versions/visualstudio/visual-studio-2015/debugger/format-specifiers-in-cpp?view=vs-2015&redirectedfrom=MSDN" target="_blank" rel="noopener">https://docs.microsoft.com/en-us/previous-versions/visualstudio/visual-studio-2015/debugger/format-specifiers-in-cpp?view=vs-2015&amp;redirectedfrom=MSDN</a></li><li><a href="https://www.ibm.com/support/knowledgecenter/SSEQTP_liberty/com.ibm.websphere.wlp.doc/ae/rwlp_xml_escape.html" target="_blank" rel="noopener">https://www.ibm.com/support/knowledgecenter/SSEQTP_liberty/com.ibm.websphere.wlp.doc/ae/rwlp_xml_escape.html</a></li></ol></li></ul><h1 id="NATive-type-VISualization"><a href="#NATive-type-VISualization" class="headerlink" title="NATive type VISualization"></a>NATive type VISualization</h1><p>According to <a href="https://docs.microsoft.com/en-us/visualstudio/debugger/create-custom-views-of-native-objects?view=vs-2019" target="_blank" rel="noopener">reference #1</a>, the name of Natvis framework means visualization of native types. It can help your debugging with more plentiful visibility, and sometimes support mutiple environments that have a different size on the same data type. Suppose you want to make a string class storing its text as UTF-32 or something custom format, it should not be displayed well because it is not kind of ASCII. Though, do you want to see the data (in this case, the text) at <code>Watch</code> or <code>Local</code> viewport ? Then you should implement your own xml for custom Natvis visualization.</p><p><em>SCREENSHOT WITHOUT CUSTOM NATVIS</em></p><img src="/2021/03/01/unreal-engine-natvis/01.png" class=""><p><em>SCREENSHOT WITH CUSTOM NATVIS</em></p><img src="/2021/03/01/unreal-engine-natvis/02.png" class=""><h1 id="Basic-syntax-and-usage"><a href="#Basic-syntax-and-usage" class="headerlink" title="Basic syntax and usage"></a>Basic syntax and usage</h1><p>The custom visualizer has XML syntax and it would be comfortable than a sole programming language. Just create a file of any name with <code>.natvis</code> extension and locate at the directory <code>Documents/Visual Studio 2019/Visualizers</code>. The Visual Studio IDE will find all natvis files at there and parse them. At first after you create the file, you need the tag <code>AutoVisualizer</code>.</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">AutoVisualizer</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">AutoVisualizer</span>&gt;</span></span><br></pre></td></tr></table></figure><p>But you may meet the error like below with our current visualizer. (You should turn on an option for showing errors related to Natvis. Manipulate the option at <code>Tools/Options/Debugging/Output Window/General OutputSettings/Natvisdiagnostic messages</code>. I recommend you to set the level as <code>Error</code>.)</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Natvis: ...\Documents\Visual Studio 2019\Visualizers\Example.natvis(1,2): Fatal error:</span><br><span class="line">Expected element with namespace &#39;http:&#x2F;&#x2F;schemas.microsoft.com&#x2F;vstudio&#x2F;debugger&#x2F;natvis&#x2F;2010&#39;.</span><br></pre></td></tr></table></figure><p>So you should specify the schemas. Like this.</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">AutoVisualizer</span> <span class="attr">xmlns</span>=<span class="string">"http://schemas.microsoft.com/vstudio/debugger/natvis/2010"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">AutoVisualizer</span>&gt;</span></span><br></pre></td></tr></table></figure><p>And, the <code>AutoVisualizer</code> tag can have a child tag such as <code>Type</code>. The <code>Type</code> tag must have an attribute <code>Name</code>. <code>Name</code> can be set as the name of type. For example, you should type <code>SomeClass</code> at the attribute when you created a type <code>SomeClass</code>.</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SomeClass</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">int</span> ID = <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    SomeClass Some01;</span><br><span class="line">    Some01.ID = <span class="number">100</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">AutoVisualizer</span> <span class="attr">xmlns</span>=<span class="string">"http://schemas.microsoft.com/vstudio/debugger/natvis/2010"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">Type</span> <span class="attr">Name</span>=<span class="string">"SomeClass"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">Type</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">AutoVisualizer</span>&gt;</span></span><br></pre></td></tr></table></figure><img src="/2021/03/01/unreal-engine-natvis/03.png" class=""><p>The <code>Type</code> tag can have a child tag such <code>DisplayString/Expand</code>. The <code>DisplayString</code> tag can be used for displaying a string at the debugging window like below.</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">AutoVisualizer</span> <span class="attr">xmlns</span>=<span class="string">"http://schemas.microsoft.com/vstudio/debugger/natvis/2010"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">Type</span> <span class="attr">Name</span>=<span class="string">"SomeClass"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">DisplayString</span>&gt;</span></span><br><span class="line">This is my class</span><br><span class="line"><span class="tag">&lt;/<span class="name">DisplayString</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">Type</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">AutoVisualizer</span>&gt;</span></span><br></pre></td></tr></table></figure><img src="/2021/03/01/unreal-engine-natvis/04.png" class=""><p>You can get the value of member variable. Brace the member variable as <code>{}</code>.</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">AutoVisualizer</span> <span class="attr">xmlns</span>=<span class="string">"http://schemas.microsoft.com/vstudio/debugger/natvis/2010"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">Type</span> <span class="attr">Name</span> = <span class="string">"SomeClass"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">DisplayString</span>&gt;</span></span><br><span class="line">My ID is &#123;ID&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">DisplayString</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">Type</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">AutoVisualizer</span>&gt;</span></span><br></pre></td></tr></table></figure><img src="/2021/03/01/unreal-engine-natvis/05.png" class=""><p>With the <code>Expand</code> tag, you can customize the expanded view. The <code>Item</code> tags consist of the list. If you customize the expanded view as <code>Expand</code> tag, automatically <code>Raw View</code> item created, which was the original expanded view. You can decorate each line of list in expanded view. The specifier <code>sb</code> and <code>x</code> are respectively meaning “Display the string without quotation marks” and “Display the integer with hexa-decimal format”. For more details, visit <a href="https://docs.microsoft.com/en-us/previous-versions/visualstudio/visual-studio-2015/debugger/format-specifiers-in-cpp?view=vs-2015&redirectedfrom=MSDN" target="_blank" rel="noopener">reference #2</a>.</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">AutoVisualizer</span> <span class="attr">xmlns</span>=<span class="string">"http://schemas.microsoft.com/vstudio/debugger/natvis/2010"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">Type</span> <span class="attr">Name</span> = <span class="string">"SomeClass"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">DisplayString</span>&gt;</span></span><br><span class="line">My ID is &#123;ID&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">DisplayString</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">Expand</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">Item</span> <span class="attr">Name</span>=<span class="string">"Description"</span>&gt;</span></span><br><span class="line">"Natvis is awesome", sb</span><br><span class="line"><span class="tag">&lt;/<span class="name">Item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">Item</span> <span class="attr">Name</span>=<span class="string">"ID"</span>&gt;</span></span><br><span class="line">ID, x</span><br><span class="line"><span class="tag">&lt;/<span class="name">Item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">Expand</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">Type</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">AutoVisualizer</span>&gt;</span></span><br></pre></td></tr></table></figure><img src="/2021/03/01/unreal-engine-natvis/06.png" class=""><h1 id="Example-in-UnrealEngine"><a href="#Example-in-UnrealEngine" class="headerlink" title="Example in UnrealEngine"></a>Example in UnrealEngine</h1><p>Let us find an example in UnrealEngine one. You can find <code>UE4.natvis</code> if you installed UnrealEngine at your local system. Mostly, the <code>UE4.natvis</code> located in <code>Engine/Extras/VisualStudioDebugging/UE4.natvis</code>.</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">AutoVisualizer</span> <span class="attr">xmlns</span>=<span class="string">"http://schemas.microsoft.com/vstudio/debugger/natvis/2010"</span>&gt;</span></span><br><span class="line">    ...</span><br><span class="line">    <span class="comment">&lt;!-- FString visualizer --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Type</span> <span class="attr">Name</span>=<span class="string">"FString"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">DisplayString</span> <span class="attr">Condition</span>=<span class="string">"Data.ArrayNum == 0"</span>&gt;</span>Empty<span class="tag">&lt;/<span class="name">DisplayString</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">DisplayString</span> <span class="attr">Condition</span>=<span class="string">"Data.ArrayNum <span class="symbol">&amp;lt;</span> 0"</span>&gt;</span>Invalid<span class="tag">&lt;/<span class="name">DisplayString</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">DisplayString</span> <span class="attr">Condition</span>=<span class="string">"Data.ArrayMax <span class="symbol">&amp;lt;</span> Data.ArrayNum"</span>&gt;</span>Invalid<span class="tag">&lt;/<span class="name">DisplayString</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">DisplayString</span> <span class="attr">Condition</span>=<span class="string">"Data.ArrayMax <span class="symbol">&amp;gt;</span>= Data.ArrayNum"</span>&gt;</span>&#123;Data.AllocatorInstance.Data,su&#125;<span class="tag">&lt;/<span class="name">DisplayString</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">StringView</span> <span class="attr">Condition</span>=<span class="string">"Data.ArrayMax <span class="symbol">&amp;gt;</span>= Data.ArrayNum"</span>&gt;</span>Data.AllocatorInstance.Data,su<span class="tag">&lt;/<span class="name">StringView</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">Type</span>&gt;</span></span><br><span class="line">    ...</span><br><span class="line"><span class="tag">&lt;/<span class="name">AutoVisualizer</span>&gt;</span></span><br></pre></td></tr></table></figure><p>First of all, the <code>FString</code> welcomes us. Have a look for why the <code>FString</code> visualizer has been made like this. ( <code>&amp;lt;</code> and <code>&amp;gt;</code> things are escaped characters in xml. For more details, visit <a href="https://www.ibm.com/support/knowledgecenter/SSEQTP_liberty/com.ibm.websphere.wlp.doc/ae/rwlp_xml_escape.html" target="_blank" rel="noopener">reference #3</a>. )</p><img src="/2021/03/01/unreal-engine-natvis/07.png" class=""><p>Put a breakpoint at where the <code>FString</code> is initialized. Before initialization, we can see <code>Invalid</code> at the debugging window.</p><img src="/2021/03/01/unreal-engine-natvis/08.png" class=""><p>Expand the items. We can see the <code>ArrayNum</code> has a negative value. The condition <code>Data.ArrayNum &lt; 0</code> is satisfied and <code>Invalid</code> would be shown.</p><img src="/2021/03/01/unreal-engine-natvis/09.png" class=""><p>After initialization, we can see the string very well. In this case, the condition <code>Data.ArrayMax &gt;= Data.ArrayNum</code> is satisfied and <code>L&quot;ABC&quot;</code> would be shown. Why does the string look like <code>L&quot;...&quot;</code> ? Because of the format specifier <code>su</code>. Check the <a href="https://docs.microsoft.com/en-us/previous-versions/visualstudio/visual-studio-2015/debugger/format-specifiers-in-cpp?view=vs-2015&redirectedfrom=MSDN" target="_blank" rel="noopener">reference #2</a> again.</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Engine/Source/Runtime/Core/Public/Containers/UnrealString.h</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CORE_API</span> <span class="title">FString</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"><span class="keyword">friend</span> <span class="class"><span class="keyword">struct</span> <span class="title">TContainerTraits</span>&lt;FString&gt;;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/** Array holding the character data */</span></span><br><span class="line"><span class="keyword">typedef</span> TArray&lt;TCHAR&gt; DataType;</span><br><span class="line">DataType Data;</span><br><span class="line">...</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>The <code>FString</code> stores its string with <code>TArray&lt;TCHAR&gt;</code>. So we could see the <code>ArrayNum</code> or <code>ArrayMax</code> things at the <code>FString</code> visualizer.</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">Engine/Source/Runtime/Core/Public/Containers/Array.h</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> InElementType, <span class="keyword">typename</span> InAllocator&gt;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TArray</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> OtherInElementType, <span class="keyword">typename</span> OtherAllocator&gt;</span><br><span class="line"><span class="keyword">friend</span> <span class="class"><span class="keyword">class</span> <span class="title">TArray</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">typename</span> InAllocator::SizeType SizeType;</span><br><span class="line"><span class="keyword">typedef</span> InElementType ElementType;</span><br><span class="line"><span class="keyword">typedef</span> InAllocator   Allocator;</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> ElementType, <span class="keyword">typename</span> Allocator&gt;</span><br><span class="line"><span class="keyword">friend</span> <span class="class"><span class="keyword">class</span> <span class="title">TIndirectArray</span>;</span></span><br><span class="line"></span><br><span class="line">ElementAllocatorType AllocatorInstance;</span><br><span class="line">SizeType             ArrayNum;</span><br><span class="line">SizeType             ArrayMax;</span><br></pre></td></tr></table></figure><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Engine/Source/Runtime/Core/Public/Containers/ContainersFwd.h</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">int</span> IndexSize&gt; <span class="class"><span class="keyword">class</span> <span class="title">TSizedDefaultAllocator</span>;</span></span><br><span class="line"><span class="keyword">using</span> FDefaultAllocator = TSizedDefaultAllocator&lt;<span class="number">32</span>&gt;;</span><br><span class="line"><span class="keyword">using</span> FDefaultAllocator64 = TSizedDefaultAllocator&lt;<span class="number">64</span>&gt;;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FDefaultSetAllocator</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FString</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span> Allocator = FDefaultAllocator&gt; class TArray;</span><br><span class="line">...</span><br></pre></td></tr></table></figure><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">Engine/Source/Runtime/Core/Public/Containers/ContainerAllocationPolicies.h</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">int</span> IndexSize&gt;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">TBitsToSizeType</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">static_assert</span>(IndexSize, <span class="string">"Unsupported allocator index size."</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;&gt; <span class="class"><span class="keyword">struct</span> <span class="title">TBitsToSizeType</span>&lt;8&gt;  &#123;</span> <span class="keyword">using</span> Type = int8; &#125;;</span><br><span class="line"><span class="keyword">template</span> &lt;&gt; <span class="class"><span class="keyword">struct</span> <span class="title">TBitsToSizeType</span>&lt;16&gt; &#123;</span> <span class="keyword">using</span> Type = int16; &#125;;</span><br><span class="line"><span class="keyword">template</span> &lt;&gt; <span class="class"><span class="keyword">struct</span> <span class="title">TBitsToSizeType</span>&lt;32&gt; &#123;</span> <span class="keyword">using</span> Type = int32; &#125;;</span><br><span class="line"><span class="keyword">template</span> &lt;&gt; <span class="class"><span class="keyword">struct</span> <span class="title">TBitsToSizeType</span>&lt;64&gt; &#123;</span> <span class="keyword">using</span> Type = int64; &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/** The indirect allocation policy always allocates the elements indirectly. */</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">int</span> IndexSize&gt;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TSizedHeapAllocator</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="keyword">using</span> SizeType = <span class="keyword">typename</span> TBitsToSizeType&lt;IndexSize&gt;::Type;</span><br><span class="line">...</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">int</span> IndexSize&gt; <span class="class"><span class="keyword">class</span> <span class="title">TSizedDefaultAllocator</span> :</span> <span class="keyword">public</span> TSizedHeapAllocator&lt;IndexSize&gt; &#123; <span class="keyword">public</span>: <span class="keyword">typedef</span> TSizedHeapAllocator&lt;IndexSize&gt; Typedef; &#125;;</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>And you can find the type of <code>ArrayNum</code> and <code>ArrayMax</code> is <code>int32</code> with this flow.</p><p>Sometimes, the <code>UE4.natvis</code> gives us a hint for understanding the complicated engine code. Even someday you may need to customize <code>UE4.natvis</code> for special case while supporting various platforms. It would be also good to learn Natvis if you mostly use Visual Studio IDE. Read premade ones and write your ones. :)</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;ul&gt;
&lt;li&gt;this post covers&lt;ul&gt;
&lt;li&gt;what is Natvis&lt;/li&gt;
&lt;li&gt;how to write custom Natvis visualization&lt;/li&gt;
&lt;li&gt;customization in UnrealEngine&lt;/l
      
    
    </summary>
    
    
    
      <category term="UnrealEngine, Natvis" scheme="https://baemincheon.github.io/tags/UnrealEngine-Natvis/"/>
    
  </entry>
  
  <entry>
    <title>retrospection-2020</title>
    <link href="https://baemincheon.github.io/2020/12/24/retrospection-2020/"/>
    <id>https://baemincheon.github.io/2020/12/24/retrospection-2020/</id>
    <published>2020-12-24T06:09:10.000Z</published>
    <updated>2020-12-26T18:19:17.804Z</updated>
    
    <content type="html"><![CDATA[<h1 id="overview"><a href="#overview" class="headerlink" title="overview"></a><code>overview</code></h1><img src="/2020/12/24/retrospection-2020/01.jpg" class=""><p>Exactly one year passed after I wrote the retrospection of 2019. (<a href="https://baemincheon.github.io/2019/12/24/retrospection-2019/">https://baemincheon.github.io/2019/12/24/retrospection-2019/</a>) Feeling that time goes so fast as I look back lots of things behind. From the god damn COVID-19 to the remote work during quarantine, we got so many things to say. But, the old year (2019) is still the hardest year to me. This year would be second one as I believe myself that I have taken plenty of breaks in this year.</p><p>Though the main topics of retrospection are related to worldwide crisis, I will try not to talk about it as possible. Now it is some kinda routine issue and I want to care about personal events. In addition to, other people are already saying or sharing the contents about it. I just hope this crisis ends as soon as possible and get back into old routines.</p><h1 id="play"><a href="#play" class="headerlink" title="play"></a><code>play</code></h1><img src="/2020/12/24/retrospection-2020/02.jpg" class=""><p>This year, I played games most of time with Nintendo Switch. Especially, <code>Splatoon 2</code> and <code>Ring Fit Adventure</code> were the ones that I liked. <code>Splatoon 2</code> is not such a fresh game (released at 2017/07/21), so it was hard to enjoy multi-play contents due to other players much more skillful than me. But, its single-play contents were quite good and well structured. Therefore, I also purchased a DLC for another single-play contents. I played <code>Splatoon 2</code> about 100 hours and am pleased with the game quality. The game is not kinda “GOD GAME” thing, but I am sure it has worth to play at least once. For me, an enthusiast of FPS game, unusual concepts of this game looks nice.</p><img src="/2020/12/24/retrospection-2020/03.jpg" class=""><p>I really like the <code>Ring Fit Adventure</code>. It has been so difficult to exercise funny that I used to stop exercising several times. You know, even such a strong will sustains less than few weeks or months. But, I am still keeping exercising for more than 6 months with the game. Thanks to its gamification, I seldom lost interest on exercising and sometimes got motive, too. I played <code>Ring Fit Adventure</code> about 150 hours and am pleased with the game quality. I am sure I can recommend this game if you have Nintendo Switch. And there may be only this option in these days as fitness clubs closed. Home training is not optional but required.</p><img src="/2020/12/24/retrospection-2020/14.jpg" class=""><p>Oh, I almost forgot it. I played the game <code>3000th Duel</code>, too. It is a game released at PC(Steam) and Nintendo Switch. The game is said as one of Metroidvania things, because of its contents and mood. It was not easy one but there was the balance between feeling fulfilled and bearing hardship. I played <code>3000th Duel</code> about 40 hours including DLC part. Though It does not have an easy mode option such as <code>Just Enjoy The Story</code> difficulty, you can go easy or hard depends on how much you spent time at farming. It is up to you. Though there were several times that I screamed (lol) for anger, it helped me to get used to manipulating Nintendo Switch controller.</p><h1 id="activity"><a href="#activity" class="headerlink" title="activity"></a><code>activity</code></h1><img src="/2020/12/24/retrospection-2020/04.jpg" class=""></br><img src="/2020/12/24/retrospection-2020/05.jpg" class=""><p>Some old people may know about <code>Touhou Project</code>. It is one of vertically scrolled shooting games such as <code>Strikers 1945</code>. The game was popular on 90s and 00s for its unique worldview, which lead to numerous numbers of derivative works created by users. Some works are still created in these days although it is become less popular than before. But, almost every one is aimed for English or Japanese version not the Korean.</p><p>Fortunately, <code>Touhou Spell Bubble</code> has recently started to support Korean version. It was first released at 2020/02/06, and started to support Korean version from 2020/10/15. Despite of many concerns, I was happy to see the game supports Korean. (You might know, Korean market is not actually attractive.) So I was willing to visit the cafe when the game is promoted. We ordered every menu once and pictured them.</p><img src="/2020/12/24/retrospection-2020/06.jpg" class=""></br><img src="/2020/12/24/retrospection-2020/07.jpg" class=""><p>I remember that I mentioned the laboratory in previous retrospection. (Maybe because I did my best in lab) The professor of lab suggested me to give a lecture, whose content is about C language. I accepted the suggestion without hesitation, and wrote some slideshows. The lecture is in the first-year curriculum, however, I wanted to deal with real application of C language. Why ? Every student in 2020 may have a doubt on studying C language. Because there are already many programming languages that looks awesome and easy such as Python or Javascript.</p><p>So I focused on “Why We Study C Language” and “How C Language Is Used” for resolving the doubts. I prepared the contents like Explaining “Why C Language Can Manipulate Memory” with assembly codes, showing “How C Language Is Used In Real Project” with Linux kernel codes. People rarely say about them. Time has passed, we do not use C language for all purposes. I thought now we should consider to focus what only C can do when we teach C language to students.</p><h1 id="work"><a href="#work" class="headerlink" title="work"></a><code>work</code></h1><img src="/2020/12/24/retrospection-2020/09.jpg" class=""></br><img src="/2020/12/24/retrospection-2020/10.jpg" class=""></br><img src="/2020/12/24/retrospection-2020/11.jpg" class=""><p>Already one year passed from join the PUBG. Exactly 1.5 year ? I am now familiar to my work, and even got the sub role additionally. We had an anniversary cake with people who joined PUBG in the same time, too. Work is not easy going, but we try to do boost each other and overcome it. I wish I can go with the people as many as can also even one year passed again. It is sad that now we cannot get together in offline due to the crisis. We had often got together once per 1~2 months, and had a dinner. I already miss that times.</p><p>Starting remote work, I found some pros and cons. Remote work seems not the silver bullet one in every situation. Of course, there are common topics on remote work regardless of job. But, some topics are unique ones only existing on game developer job. I can show cons below:</p><p><em>Common Topics</em></p><ul><li>chores that did not exist when you commute to office<br>(ex: cooking, managing workplace)</li><li>hardness to know about work mood<br>(ex: are they excited ? are they angry ?)</li><li>irregular work time with personal circumstances<br>(ex: family with kids)</li></ul><p><em>Extra Topics (for game developer job)</em></p><ul><li>heavy traffic due to massive volume of program<br>(it is painful at home network to upload or download programs when compared with office network)</li><li>laggy remote screen sharing<br>(game developer should usually run the client program, while it is okay other developers use only console prompt)</li><li>poor response time on input or output<br>(when the game is  kind of real time game…)</li></ul><img src="/2020/12/24/retrospection-2020/13.png" class=""></br><img src="/2020/12/24/retrospection-2020/12.jpg" class=""><p>Play Station 5 has been released in recent. Sony planned to celebrate the event with partner companies, and collected the picture of members. I sent the picture above, and you can find it on the site <a href="https://sie.offbaseproductions.com/" target="_blank" rel="noopener">https://sie.offbaseproductions.com/</a> too. It is something monumental and memorable. Sony did good job. I was glad to develop on PS5. :)</p><h1 id="thoughts"><a href="#thoughts" class="headerlink" title="thoughts"></a><code>thoughts</code></h1><img src="/2020/12/24/retrospection-2020/08.jpg" class=""><p>This year, I leave some regrets that I should have done more things. I should have met more people and read books. But…the lethargy from the crisis, everyone may have felt this. I cannot assert it did not affect me. People around me seems sometimes sad and depressed, too. What was worse, we end up this year as bad situation with high amount of patients. It is hard to believe next year would be better.</p><p>Somebody said, “The World Never Be The Same”. At first of this year, I did not agree the words. Because I could not imagine the new world. But…we going to the new world anyway, and it seems we must adapt. Even this year is said the most terrible one, I think we should remember it. To look back to stop this tragedy. We gotta be worry about how to adapt new world and how to live next year, based on new rules.</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;overview&quot;&gt;&lt;a href=&quot;#overview&quot; class=&quot;headerlink&quot; title=&quot;overview&quot;&gt;&lt;/a&gt;&lt;code&gt;overview&lt;/code&gt;&lt;/h1&gt;&lt;img src=&quot;/2020/12/24/retrospection-
      
    
    </summary>
    
    
    
      <category term="Retrospection" scheme="https://baemincheon.github.io/tags/Retrospection/"/>
    
  </entry>
  
  <entry>
    <title>unreal-input-system-via-gamepad</title>
    <link href="https://baemincheon.github.io/2020/10/25/unreal-input-system-via-gamepad/"/>
    <id>https://baemincheon.github.io/2020/10/25/unreal-input-system-via-gamepad/</id>
    <published>2020-10-25T09:11:09.000Z</published>
    <updated>2020-10-27T15:22:13.642Z</updated>
    
    <content type="html"><![CDATA[<ul><li>this post covers<ul><li>key mapping of Xbox One controller in UnrealEngine</li><li>how UnrealEngine handles input from user</li><li>input process for gamepad (with Xbox One controller)</li></ul></li><li>environment<ul><li>Unreal Engine 4 <code>ver. 4.25</code></li><li>Visual Studio 2019 <code>ver. 16.7.6</code></li><li>Windows 10 <code>ver. 2004</code></li></ul></li><li>reference<ol><li><a href="https://support.xbox.com/en-US/help/hardware-network/controller/xbox-one-wireless-controller" target="_blank" rel="noopener">https://support.xbox.com/en-US/help/hardware-network/controller/xbox-one-wireless-controller</a></li></ol></li></ul><hr><h1 id="Terms"><a href="#Terms" class="headerlink" title="Terms"></a><em>Terms</em></h1><table><thead><tr><th>Term</th><th>Synonym</th><th>Meaning</th></tr></thead><tbody><tr><td>Non-Axis</td><td>Key, Button</td><td>input type which has only two states: <code>Pressed</code> or <code>Released</code></td></tr><tr><td>Axis</td><td>Stick</td><td>input type which has numberless states</td></tr><tr><td>Key</td><td></td><td>(sometimes) it is used for indicating any input type. be careful with context for distinction of <code>Non-Axis</code></td></tr><tr><td>Deadzone</td><td>Threshold</td><td>range of input values, which blocks values in range. only bigger value cannot be blocked</td></tr></tbody></table><h1 id="Gamepad-Non-Axis-Axis-Mapping-in-UnrealEngine"><a href="#Gamepad-Non-Axis-Axis-Mapping-in-UnrealEngine" class="headerlink" title="Gamepad Non-Axis/Axis Mapping in UnrealEngine"></a><em>Gamepad Non-Axis/Axis Mapping in UnrealEngine</em></h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">UnrealEngine/Engine/Source/Runtime/Core/Private/GenericPlatform/GenericApplication.cpp</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"><span class="keyword">const</span> FGamepadKeyNames::Type FGamepadKeyNames::LeftAnalogX(<span class="string">"Gamepad_LeftX"</span>);</span><br><span class="line"><span class="keyword">const</span> FGamepadKeyNames::Type FGamepadKeyNames::LeftAnalogY(<span class="string">"Gamepad_LeftY"</span>);</span><br><span class="line"><span class="keyword">const</span> FGamepadKeyNames::Type FGamepadKeyNames::RightAnalogX(<span class="string">"Gamepad_RightX"</span>);</span><br><span class="line"><span class="keyword">const</span> FGamepadKeyNames::Type FGamepadKeyNames::RightAnalogY(<span class="string">"Gamepad_RightY"</span>);</span><br><span class="line"><span class="keyword">const</span> FGamepadKeyNames::Type FGamepadKeyNames::LeftTriggerAnalog(<span class="string">"Gamepad_LeftTriggerAxis"</span>);</span><br><span class="line"><span class="keyword">const</span> FGamepadKeyNames::Type FGamepadKeyNames::RightTriggerAnalog(<span class="string">"Gamepad_RightTriggerAxis"</span>);</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>we can find some pre-defined non-axis/axis keys as <code>FName</code> in <code>GenericApplication.cpp</code>. they are for mapping from various input messages to generic input messages. “various input messages” means, there are many types of gamepad in the world. the button/stick layout differs in Xbox One controller, Playstation 4 controller and so on. the gamepads below are Xbox One, Playstation 4, Stadia and Switch in order.</p><img src="/2020/10/25/unreal-input-system-via-gamepad/01.jpg" class=""><img src="/2020/10/25/unreal-input-system-via-gamepad/02.jpg" class=""><img src="/2020/10/25/unreal-input-system-via-gamepad/03.png" class=""><img src="/2020/10/25/unreal-input-system-via-gamepad/04.jpg" class=""><p>look at the Xbox One one and Playstation 4 one. they have many differences such as position of stick and exsitance of touch pad. even in comparison for Xbox One one and Switch one, the number of buttons differs. in this situation, it is not easy for every individual developer to support every type of gamepad, so the need of generic mapping for gamepad input arises. let us find out the generic mapping with Xbox One controller examples.</p><img src="/2020/10/25/unreal-input-system-via-gamepad/06.png" class=""><img src="/2020/10/25/unreal-input-system-via-gamepad/07.png" class=""><p>the tables are from the <a href="https://support.xbox.com/en-US/help/hardware-network/controller/xbox-one-wireless-controller" target="_blank" rel="noopener">reference #1</a>. you can find more details for each button/stick at the URL. though there are so many items in table, some of them are not counted as user input in common situation. so, we can gotta consider the items below:</p><table><thead><tr><th>Index</th><th>Item Name</th><th>Unreal Mapping</th><th>Input Type</th></tr></thead><tbody><tr><td>1</td><td>Left Stick</td><td>(Move Horizontally) Gamepad_LeftX</td><td>Key, Axis</td></tr><tr><td></td><td></td><td>(Move Vertically) Gamepad_LeftY</td><td>Key, Axis</td></tr><tr><td></td><td></td><td>(Move Left Side More Than Deadzone) Gamepad_LeftStick_Left</td><td>Key</td></tr><tr><td></td><td></td><td>(Move Up Side More Than Deadzone) Gamepad_LeftStick_Up</td><td>Key</td></tr><tr><td></td><td></td><td>(Move Right Side More Than Deadzone) Gamepad_LeftStick_Up</td><td>Key</td></tr><tr><td></td><td></td><td>(Move Down Side More Than Deadzone) Gamepad_LeftStick_Down</td><td>Key</td></tr><tr><td></td><td></td><td>(Click) Gamepad_LeftThumbstick</td><td>Key</td></tr><tr><td>2</td><td>Left Bumper</td><td>Gamepad_LeftShoulder</td><td>Key</td></tr><tr><td>3</td><td>View Button</td><td>Gamepad_Special_Left</td><td>Key</td></tr><tr><td>6</td><td>Menu Button</td><td>Gamepad_Special_Right</td><td>Key</td></tr><tr><td>7</td><td>Right Bumper</td><td>Gamepad_RightShoulder</td><td>Key</td></tr><tr><td>8</td><td>Directional Pad</td><td>(Left) Gamepad_DPad_Left</td><td>Key</td></tr><tr><td></td><td></td><td>(Up) Gamepad_DPad_Up</td><td>Key</td></tr><tr><td></td><td></td><td>(Right) Gamepad_DPad_Right</td><td>Key</td></tr><tr><td></td><td></td><td>(Down) Gamepad_DPad_Down</td><td>Key</td></tr><tr><td>10</td><td>Right Stick</td><td>(Move Horizontally) Gamepad_RightX</td><td>Key, Axis</td></tr><tr><td></td><td></td><td>(Move Vertically) Gamepad_RightY</td><td>Key, Axis</td></tr><tr><td></td><td></td><td>(Move Left Side More Than Deadzone) Gamepad_RightStick_Left</td><td>Key</td></tr><tr><td></td><td></td><td>(Move Up Side More Than Deadzone) Gamepad_RightStick_Up</td><td>Key</td></tr><tr><td></td><td></td><td>(Move Right Side More Than Deadzone) Gamepad_RightStick_Up</td><td>Key</td></tr><tr><td></td><td></td><td>(Move Down Side More Than Deadzone) Gamepad_RightStick_Down</td><td>Key</td></tr><tr><td></td><td></td><td>(Click) Gamepad_RightThumbstick</td><td>Key</td></tr><tr><td>11</td><td>Right Trigger</td><td>Gamepad_RightTriggerAxis</td><td>Key, Axis</td></tr><tr><td></td><td></td><td>(Press More Than Deadzone) Gamepad_RightTrigger</td><td>Key</td></tr><tr><td>14</td><td>Left Trigger</td><td>Gamepad_LeftTriggerAxis</td><td>Key, Axis</td></tr><tr><td></td><td></td><td>(Press More Than Deadzone) Gamepad_LeftTrigger</td><td>Key</td></tr><tr><td>X</td><td>X Button</td><td>Gamepad_FaceButton_Left</td><td>Key</td></tr><tr><td>Y</td><td>Y Button</td><td>Gamepad_FaceButton_Up</td><td>Key</td></tr><tr><td>A</td><td>A Button</td><td>Gamepad_FaceButton_Bottom</td><td>Key</td></tr><tr><td>B</td><td>B Button</td><td>Gamepad_FaceButton_Right</td><td>Key</td></tr></tbody></table><p>some of them are handled as not only Key but Axis, too.</p><img src="/2020/10/25/unreal-input-system-via-gamepad/08.png" class=""></br><img src="/2020/10/25/unreal-input-system-via-gamepad/09.png" class=""><ul><li>the <code>Gamepad_LeftY</code> is the one of cases</li></ul><h1 id="Gamepad-Non-Axis-Input-Handling-Process"><a href="#Gamepad-Non-Axis-Input-Handling-Process" class="headerlink" title="Gamepad Non-Axis Input Handling Process"></a><em>Gamepad Non-Axis Input Handling Process</em></h1><img src="/2020/10/25/unreal-input-system-via-gamepad/10.png" class=""><p>focus the function <code>XInputInterface::SendControllerEvents()</code>. there is the logic to filter hardware input state.</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">UnrealEngine/Engine/Source/Runtime/ApplicationCore/Private/Windows/XInputInterface.cpp</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> XInputInterface::SendControllerEvents()</span><br><span class="line">&#123;</span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">    CurrentStates[X360ToXboxControllerMapping[<span class="number">0</span>]] = !!(XInputState.Gamepad.wButtons &amp; XINPUT_GAMEPAD_A);</span><br><span class="line">    CurrentStates[X360ToXboxControllerMapping[<span class="number">1</span>]] = !!(XInputState.Gamepad.wButtons &amp; XINPUT_GAMEPAD_B);</span><br><span class="line">    CurrentStates[X360ToXboxControllerMapping[<span class="number">2</span>]] = !!(XInputState.Gamepad.wButtons &amp; XINPUT_GAMEPAD_X);</span><br><span class="line">    CurrentStates[X360ToXboxControllerMapping[<span class="number">3</span>]] = !!(XInputState.Gamepad.wButtons &amp; XINPUT_GAMEPAD_Y);</span><br><span class="line">    CurrentStates[X360ToXboxControllerMapping[<span class="number">4</span>]] = !!(XInputState.Gamepad.wButtons &amp; XINPUT_GAMEPAD_LEFT_SHOULDER);</span><br><span class="line">    CurrentStates[X360ToXboxControllerMapping[<span class="number">5</span>]] = !!(XInputState.Gamepad.wButtons &amp; XINPUT_GAMEPAD_RIGHT_SHOULDER);</span><br><span class="line">    CurrentStates[X360ToXboxControllerMapping[<span class="number">6</span>]] = !!(XInputState.Gamepad.wButtons &amp; XINPUT_GAMEPAD_BACK);</span><br><span class="line">    CurrentStates[X360ToXboxControllerMapping[<span class="number">7</span>]] = !!(XInputState.Gamepad.wButtons &amp; XINPUT_GAMEPAD_START);</span><br><span class="line">    CurrentStates[X360ToXboxControllerMapping[<span class="number">8</span>]] = !!(XInputState.Gamepad.wButtons &amp; XINPUT_GAMEPAD_LEFT_THUMB);</span><br><span class="line">    CurrentStates[X360ToXboxControllerMapping[<span class="number">9</span>]] = !!(XInputState.Gamepad.wButtons &amp; XINPUT_GAMEPAD_RIGHT_THUMB);</span><br><span class="line">    CurrentStates[X360ToXboxControllerMapping[<span class="number">10</span>]] = !!(XInputState.Gamepad.bLeftTrigger &gt; XINPUT_GAMEPAD_TRIGGER_THRESHOLD);</span><br><span class="line">    CurrentStates[X360ToXboxControllerMapping[<span class="number">11</span>]] = !!(XInputState.Gamepad.bRightTrigger &gt; XINPUT_GAMEPAD_TRIGGER_THRESHOLD);</span><br><span class="line">    CurrentStates[X360ToXboxControllerMapping[<span class="number">12</span>]] = !!(XInputState.Gamepad.wButtons &amp; XINPUT_GAMEPAD_DPAD_UP);</span><br><span class="line">    CurrentStates[X360ToXboxControllerMapping[<span class="number">13</span>]] = !!(XInputState.Gamepad.wButtons &amp; XINPUT_GAMEPAD_DPAD_DOWN);</span><br><span class="line">    CurrentStates[X360ToXboxControllerMapping[<span class="number">14</span>]] = !!(XInputState.Gamepad.wButtons &amp; XINPUT_GAMEPAD_DPAD_LEFT);</span><br><span class="line">    CurrentStates[X360ToXboxControllerMapping[<span class="number">15</span>]] = !!(XInputState.Gamepad.wButtons &amp; XINPUT_GAMEPAD_DPAD_RIGHT);</span><br><span class="line">    CurrentStates[X360ToXboxControllerMapping[<span class="number">16</span>]] = !!(XInputState.Gamepad.sThumbLY &gt; XINPUT_GAMEPAD_LEFT_THUMB_DEADZONE);</span><br><span class="line">    CurrentStates[X360ToXboxControllerMapping[<span class="number">17</span>]] = !!(XInputState.Gamepad.sThumbLY &lt; -XINPUT_GAMEPAD_LEFT_THUMB_DEADZONE);</span><br><span class="line">    CurrentStates[X360ToXboxControllerMapping[<span class="number">18</span>]] = !!(XInputState.Gamepad.sThumbLX &lt; -XINPUT_GAMEPAD_LEFT_THUMB_DEADZONE);</span><br><span class="line">    CurrentStates[X360ToXboxControllerMapping[<span class="number">19</span>]] = !!(XInputState.Gamepad.sThumbLX &gt; XINPUT_GAMEPAD_LEFT_THUMB_DEADZONE);</span><br><span class="line">    CurrentStates[X360ToXboxControllerMapping[<span class="number">20</span>]] = !!(XInputState.Gamepad.sThumbRY &gt; XINPUT_GAMEPAD_RIGHT_THUMB_DEADZONE);</span><br><span class="line">    CurrentStates[X360ToXboxControllerMapping[<span class="number">21</span>]] = !!(XInputState.Gamepad.sThumbRY &lt; -XINPUT_GAMEPAD_RIGHT_THUMB_DEADZONE);</span><br><span class="line">    CurrentStates[X360ToXboxControllerMapping[<span class="number">22</span>]] = !!(XInputState.Gamepad.sThumbRX &lt; -XINPUT_GAMEPAD_RIGHT_THUMB_DEADZONE);</span><br><span class="line">    CurrentStates[X360ToXboxControllerMapping[<span class="number">23</span>]] = !!(XInputState.Gamepad.sThumbRX &gt; XINPUT_GAMEPAD_RIGHT_THUMB_DEADZONE);</span><br><span class="line"></span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>the next screenshot shows the value of <code>CurrentStates</code> when you press A button in Xbox One gamepad.</p><img src="/2020/10/25/unreal-input-system-via-gamepad/11.png" class=""><p>we can see the key, deadzone or threshold macro in the code. the macros are defined at <code>XInput.h</code></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">C:/Program Files (x86)/Windows Kits/10/Include/10.0.18362.0/um/XInput.h</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// Constants for gamepad buttons</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> XINPUT_GAMEPAD_DPAD_UP          0x0001</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> XINPUT_GAMEPAD_DPAD_DOWN        0x0002</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> XINPUT_GAMEPAD_DPAD_LEFT        0x0004</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> XINPUT_GAMEPAD_DPAD_RIGHT       0x0008</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> XINPUT_GAMEPAD_START            0x0010</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> XINPUT_GAMEPAD_BACK             0x0020</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> XINPUT_GAMEPAD_LEFT_THUMB       0x0040</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> XINPUT_GAMEPAD_RIGHT_THUMB      0x0080</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> XINPUT_GAMEPAD_LEFT_SHOULDER    0x0100</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> XINPUT_GAMEPAD_RIGHT_SHOULDER   0x0200</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> XINPUT_GAMEPAD_A                0x1000</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> XINPUT_GAMEPAD_B                0x2000</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> XINPUT_GAMEPAD_X                0x4000</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> XINPUT_GAMEPAD_Y                0x8000</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// Gamepad thresholds</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> XINPUT_GAMEPAD_LEFT_THUMB_DEADZONE  7849</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> XINPUT_GAMEPAD_RIGHT_THUMB_DEADZONE 8689</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> XINPUT_GAMEPAD_TRIGGER_THRESHOLD    30</span></span><br><span class="line"></span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>there is an exception case for input smaller than deadzone. let us take an example with <code>Gamepad_LeftX</code> message. check out screenshots below.</p><img src="/2020/10/25/unreal-input-system-via-gamepad/12.png" class=""><p>when you input a tiny change on left stick, <code>InputAxis()</code> is called. and the key will be accumulated in <code>EventAccumulator</code>.</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">UnrealEngine/Engine/Source/Runtime/Engine/Private/UserInterface/PlayerInput.cpp</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> UPlayerInput::ProcessInputStack(...)</span><br><span class="line">&#123;</span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">    Exchange(KeyState-&gt;EventCounts[EventIndex], KeyState-&gt;EventAccumulator[EventIndex]);</span><br><span class="line"></span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>after that, the key in <code>EventAccumulator</code> is moved to <code>EventCounts</code>.</p><img src="/2020/10/25/unreal-input-system-via-gamepad/13.png" class=""><p>if you keep operating the stick, the key is regarded as down.</p><img src="/2020/10/25/unreal-input-system-via-gamepad/14.png" class=""><p>in this situation, the key is regarded as released if all keys are flushed.</p><img src="/2020/10/25/unreal-input-system-via-gamepad/15.png" class=""><h1 id="Gamepad-Axis-Input-Handling-Process"><a href="#Gamepad-Axis-Input-Handling-Process" class="headerlink" title="Gamepad Axis Input Handling Process"></a><em>Gamepad Axis Input Handling Process</em></h1><p>the callstack of Axis one is similar to the Non-Axis one. there is a difference of execution at <code>XInputInterface::SendControllerEvents()</code></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">UnrealEngine/Engine/Source/Runtime/ApplicationCore/Private/Windows/XInputInterface.cpp</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> XInputInterface::SendControllerEvents()</span><br><span class="line">&#123;</span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Send new analog data if it's different or outside the platform deadzone.</span></span><br><span class="line">    <span class="keyword">auto</span> OnControllerAnalog = [<span class="keyword">this</span>, &amp;ControllerState](<span class="keyword">const</span> FName&amp; GamePadKey, <span class="keyword">const</span> <span class="keyword">auto</span> NewAxisValue, <span class="keyword">const</span> <span class="keyword">float</span> NewAxisValueNormalized, <span class="keyword">auto</span>&amp; OldAxisValue, <span class="keyword">const</span> <span class="keyword">auto</span> DeadZone) &#123;</span><br><span class="line">        <span class="keyword">if</span> (OldAxisValue != NewAxisValue || FMath::Abs((int32)NewAxisValue) &gt; DeadZone)</span><br><span class="line">        &#123;</span><br><span class="line">            MessageHandler-&gt;OnControllerAnalog(GamePadKey, ControllerState.ControllerId, NewAxisValueNormalized);</span><br><span class="line">        &#125;</span><br><span class="line">        OldAxisValue = NewAxisValue;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; Gamepad = XInputState.Gamepad;</span><br><span class="line"></span><br><span class="line">    OnControllerAnalog(FGamepadKeyNames::LeftAnalogX, Gamepad.sThumbLX, ShortToNormalizedFloat(Gamepad.sThumbLX), ControllerState.LeftXAnalog, XINPUT_GAMEPAD_LEFT_THUMB_DEADZONE);</span><br><span class="line">    OnControllerAnalog(FGamepadKeyNames::LeftAnalogY, Gamepad.sThumbLY, ShortToNormalizedFloat(Gamepad.sThumbLY), ControllerState.LeftYAnalog, XINPUT_GAMEPAD_LEFT_THUMB_DEADZONE);</span><br><span class="line"></span><br><span class="line">    OnControllerAnalog(FGamepadKeyNames::RightAnalogX, Gamepad.sThumbRX, ShortToNormalizedFloat(Gamepad.sThumbRX), ControllerState.RightXAnalog, XINPUT_GAMEPAD_RIGHT_THUMB_DEADZONE);</span><br><span class="line">    OnControllerAnalog(FGamepadKeyNames::RightAnalogY, Gamepad.sThumbRY, ShortToNormalizedFloat(Gamepad.sThumbRY), ControllerState.RightYAnalog, XINPUT_GAMEPAD_RIGHT_THUMB_DEADZONE);</span><br><span class="line"></span><br><span class="line">    OnControllerAnalog(FGamepadKeyNames::LeftTriggerAnalog, Gamepad.bLeftTrigger, Gamepad.bLeftTrigger / <span class="number">255.f</span>, ControllerState.LeftTriggerAnalog, XINPUT_GAMEPAD_TRIGGER_THRESHOLD);</span><br><span class="line">    OnControllerAnalog(FGamepadKeyNames::RightTriggerAnalog, Gamepad.bRightTrigger, Gamepad.bRightTrigger / <span class="number">255.f</span>, ControllerState.RightTriggerAnalog, XINPUT_GAMEPAD_TRIGGER_THRESHOLD);</span><br><span class="line"></span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>in this case, <code>OnControllerAnalog()</code> is called even a tiny change of input value exists. because the code compares with <code>OldAxisValue != NewAxisValue</code>. the function will not be called only when there is no change on input value.</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;ul&gt;
&lt;li&gt;this post covers&lt;ul&gt;
&lt;li&gt;key mapping of Xbox One controller in UnrealEngine&lt;/li&gt;
&lt;li&gt;how UnrealEngine handles input from user&lt;/li&gt;

      
    
    </summary>
    
    
    
      <category term="UnrealEngine" scheme="https://baemincheon.github.io/tags/UnrealEngine/"/>
    
      <category term="Input" scheme="https://baemincheon.github.io/tags/Input/"/>
    
  </entry>
  
  <entry>
    <title>unreal-unique-pointer</title>
    <link href="https://baemincheon.github.io/2020/03/14/unreal-unique-pointer/"/>
    <id>https://baemincheon.github.io/2020/03/14/unreal-unique-pointer/</id>
    <published>2020-03-14T12:47:31.000Z</published>
    <updated>2020-08-30T15:43:10.582Z</updated>
    
    <content type="html"><![CDATA[<ul><li>this post covers<ul><li>what is unique pointer in unreal engine</li><li>how it is used</li><li>restriction and caution on usage</li></ul></li><li>environment<ul><li>Unreal Engine (4.24)</li><li>Visual Studio 2017</li><li>Windows 10</li></ul></li><li>reference<ol><li><a href="https://docs.unrealengine.com/en-US/Programming/UnrealArchitecture/SmartPointerLibrary/index.html" target="_blank" rel="noopener">https://docs.unrealengine.com/en-US/Programming/UnrealArchitecture/SmartPointerLibrary/index.html</a></li></ol></li></ul><hr><h1 id="overview"><a href="#overview" class="headerlink" title="overview"></a><em>overview</em></h1><p>as unreal engine handles objects inherits <code>UObject</code>, we can use unreal engine easily. there are several benefits when the object inherits <code>UObject</code>.</p><ul><li>garbage collection</li><li>reference update</li><li>reflection</li><li>serialization</li><li>etc.</li></ul><p>then you might have one question,<br>“how we can handle the objects does not inherit <code>UObject</code> ? should we use raw pointer for the objects ?”<br>well…there are 2 ways for this.</p><ol><li>using <code>std::unique_ptr</code> of cpp std library in <code>memory.h</code></li><li>using <code>TUniquePtr</code> of unreal API in <code>UniquePtr.h</code></li></ol><p>you can use <code>std::unique_ptr</code> in unreal project, but unreal engine implements their own smart pointer library. and it is common that using <code>TUniquePtr</code> in unreal project unless you do not need cpp std library.</p><p>as purpose and functionality are the same, <code>TUniquePtr</code> is similar to <code>std::unique_ptr</code>. <code>TUniquePtr</code> also provides the unique ownership and other features. let us check out what it is and how it is used.</p><hr><h1 id="built-in-example"><a href="#built-in-example" class="headerlink" title="built-in example"></a><em>built-in example</em></h1><p>you can find some example in unreal engine code.</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">UnrealEngine/Engine/Source/Runtime/SandboxFile/Public/IPlatformFileSandboxWrapper.h</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SANDBOXFILE_API</span> <span class="title">FSandboxPlatformFile</span> :</span> <span class="keyword">public</span> IPlatformFile</span><br><span class="line">&#123;</span><br><span class="line">    ....</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>class <code>FSandboxPlatformFile</code> is not a class inherits <code>UObject</code> and it is possible to be indicated with <code>TUniquePtr</code>.<br>( conventionally, prefix <code>U</code> is attached when the class inherits <code>UObject</code> )</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">UnrealEngine/Engine/Source/Editor/UnrealEd/Classes/CookOnTheSide/CookOnTheFlyServer.h</span><br><span class="line"></span><br><span class="line">UCLASS()</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UNREALED_API</span> <span class="title">UCookOnTheFlyServer</span> :</span> <span class="keyword">public</span> UObject, <span class="keyword">public</span> FTickableEditorObject, <span class="keyword">public</span> FExec</span><br><span class="line">&#123;</span><br><span class="line">    ....</span><br><span class="line"></span><br><span class="line">    TUniquePtr&lt;<span class="class"><span class="keyword">class</span> <span class="title">FSandboxPlatformFile</span>&gt; <span class="title">SandboxFile</span>;</span></span><br><span class="line"></span><br><span class="line">    ....</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>class <code>UCookOnTheFlyServer</code> is a class inhertis <code>UObject</code> and it contains <code>TUniquePtr</code> with <code>FSandboxPlatformFile</code> as member variable.</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">UnrealEngine/Engine/Source/Editor/UnrealEd/Private/CookOnTheFlyServer.cpp</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> UCookOnTheFlyServer::PopulateCookedPackagesFromDisk(<span class="keyword">const</span> TArray&lt;ITargetPlatform*&gt;&amp; Platforms)</span><br><span class="line">&#123;</span><br><span class="line">    ....</span><br><span class="line">    </span><br><span class="line">    FString EngineSandboxPath = SandboxFile-&gt;ConvertToSandboxPath(*FPaths::EngineDir()) + TEXT(<span class="string">"/"</span>);</span><br><span class="line"></span><br><span class="line">    ....</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>accessing the object through <code>TUniquePtr</code> is the same on <code>std::unique_ptr</code>. using <code>-&gt;</code> operator, you can access the object as the normal pointer.</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">UnrealEngine/Engine/Source/Editor/UnrealEd/Private/CookOnTheFlyServer.cpp</span><br><span class="line"></span><br><span class="line">FString UCookOnTheFlyServer::ConvertToFullSandboxPath( <span class="keyword">const</span> FString &amp;FileName, <span class="keyword">bool</span> bForWrite ) <span class="keyword">const</span></span><br><span class="line">&#123;</span><br><span class="line">    check(SandboxFile);</span><br><span class="line"></span><br><span class="line">    ....</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>validation on <code>TUniquePtr</code> is the same on raw pointer. if the value is zero, the <code>TUniquePtr</code> is pointing <code>nullptr</code>. you can use <code>check</code> for ensuring whether the <code>TUniquePtr</code> is valid.</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">UnrealEngine/Engine/Source/Editor/UnrealEd/Private/Commandlets/AssetRegistryGenerator.cpp</span><br><span class="line"></span><br><span class="line"><span class="keyword">bool</span> FAssetRegistryGenerator::SaveManifests(FSandboxPlatformFile* InSandboxFile, int64 InExtraFlavorChunkSize)</span><br><span class="line">&#123;</span><br><span class="line">    ....</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>FAssetRegistryGenerator::SaveManifests</code> gets <code>FSandboxPlatformFile*</code> as one of parameters. the type of parameter is not the <code>TUniquePtr</code>, so we should convert <code>TUniquePtr&lt;T&gt;</code> into <code>T*</code>.</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">UnrealEngine/Engine/Source/Editor/UnrealEd/Private/CookOnTheFlyServer.cpp</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> UCookOnTheFlyServer::CookByTheBookFinished()</span><br><span class="line">&#123;</span><br><span class="line">    ....</span><br><span class="line"></span><br><span class="line">    Generator.SaveManifests(SandboxFile.Get());</span><br><span class="line"></span><br><span class="line">    ....</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>use the <code>TUniquePtr::Get()</code> if you need the raw pointer of <code>TUniquePtr&lt;T&gt;</code>.</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">UnrealEngine/Engine/Source/Editor/UnrealEd/Private/CookOnTheFlyServer.cpp</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> UCookOnTheFlyServer::CancelCookByTheBook()</span><br><span class="line">&#123;</span><br><span class="line">    ....</span><br><span class="line"></span><br><span class="line">    SandboxFile = <span class="literal">nullptr</span>;</span><br><span class="line"></span><br><span class="line">    ....</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>assigning <code>nullptr</code> into <code>TUniquePtr</code>, you can let <code>TUniquePtr</code> release the object and have its value as <code>nullptr</code>.</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">UnrealEngine/Engine/Source/Runtime/SandboxFile/Public/IPlatformFileSandboxWrapper.h</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SANDBOXFILE_API</span> <span class="title">FSandboxPlatformFile</span> :</span> <span class="keyword">public</span> IPlatformFile</span><br><span class="line">&#123;</span><br><span class="line">    ....</span><br><span class="line">    </span><br><span class="line">    FSandboxPlatformFile(<span class="keyword">bool</span> bInEntireEngineWillUseThisSandbox = <span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">    ....</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>constructor of <code>FSandboxPlatformFile</code> takes one parameter as boolean.</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">UnrealEngine/Engine/Source/Editor/UnrealEd/Private/CookOnTheFlyServer.cpp</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> UCookOnTheFlyServer::CreateSandboxFile()</span><br><span class="line">&#123;</span><br><span class="line">    ....</span><br><span class="line"></span><br><span class="line">    SandboxFile = MakeUnique&lt;FSandboxPlatformFile&gt;(<span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">    ....</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>MakeUnique</code> returns <code>TUniquePtr</code> object and calls the constructor of the template class. in this case, <code>MakeUnique&lt;FSandboxPlatformFile&gt;</code> takes one boolean value.</p><hr><h1 id="restriction-and-caution"><a href="#restriction-and-caution" class="headerlink" title="restriction and caution"></a><em>restriction and caution</em></h1><p>suppose you have a class like below</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UserInfo</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    UserInfo(int32 NewUserID, <span class="keyword">char</span>* NewUserName)</span><br><span class="line">        : UserID(NewUserID), UserName(NewUserName), bInitialized(<span class="literal">false</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        bInitialized = <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">virtual</span> ~UserInfo()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (UserName != <span class="literal">nullptr</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">delete</span>[] UserName;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        bInitialized = <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    int32 UserID;</span><br><span class="line">    <span class="keyword">char</span>* UserName;</span><br><span class="line">    <span class="keyword">bool</span> bInitialized;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>you should only use <code>TUniquePtr</code> at the object, which exists only one thing. unless, you would get an exception for delete on <code>nullptr</code>.</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> SomeUActor::BeginPlay()</span><br><span class="line">&#123;</span><br><span class="line">    ....</span><br><span class="line"></span><br><span class="line">    CreateUserInformation();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> SomeUActor::EndPlay(<span class="keyword">const</span> EEndPlayReason::Type EndPlayReason)</span><br><span class="line">&#123;</span><br><span class="line">    ....</span><br><span class="line"></span><br><span class="line">    ReleaseUserInformation();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> SomeUActor::CreateUserInformation()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">char</span>* String = <span class="keyword">new</span> <span class="keyword">char</span>[<span class="number">100</span>];</span><br><span class="line">    <span class="built_in">strcpy</span>(String, <span class="string">"baemincheon"</span>);</span><br><span class="line">    UserInformation = MakeUnique&lt;UserInfo&gt;(<span class="number">0</span>, String);</span><br><span class="line"></span><br><span class="line">    TUniquePtr&lt;UserInfo&gt; AnotherPtr(UserInformation.Get());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> SomeUActor::ReleaseUserInformation()</span><br><span class="line">&#123;</span><br><span class="line">    UserInformation = <span class="literal">nullptr</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>in this code, <code>CreateUserInformation</code> will be called in <code>BeginPlay</code> and <code>ReleaseUserInformation</code> will be called in <code>EndPlay</code>. <code>UserInformation</code> is a memeber variable with <code>TUniquePtr&lt;UserInfo&gt;</code> type. another <code>TUniquePtr&lt;UserInfo&gt;</code> exists in <code>CreateUserInformation</code>, which gets <code>UserInfo*</code>.</p><img src="/2020/03/14/unreal-unique-pointer/02.jpg" class=""><p>what happens when <code>CreateUserInformation</code> is ended ? <code>AnotherPtr</code> would disappear and its destructor would be called. when the destructor of <code>TUniquePtr</code> is called, it releases memory that <code>TUniquePtr</code> has pointed. as a result, variable <code>UserInformation</code> would be a dangling pointer.</p><img src="/2020/03/14/unreal-unique-pointer/03.jpg" class=""><p><code>UserInformation</code> has abnormal values.</p><img src="/2020/03/14/unreal-unique-pointer/01.jpg" class=""><p>because already the memory is released, an exception would be thrown when we execute <code>ReleaseUserInformation</code>. it is why you have to use <code>TUniquePtr</code> at the object only existing one thing and care about moving the ownership. moving the ownership with raw pointer is dangerous as we have seen.</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> SomeUActor::CreateUserInformation()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">char</span>* String = <span class="keyword">new</span> <span class="keyword">char</span>[<span class="number">100</span>];</span><br><span class="line">    <span class="built_in">strcpy</span>(String, <span class="string">"baemincheon"</span>);</span><br><span class="line">    UserInformation = MakeUnique&lt;UserInfo&gt;(<span class="number">0</span>, String);</span><br><span class="line"></span><br><span class="line">    TUniquePtr&lt;UserInfo&gt; AnotherPtr(MoveTemp(UserInformation));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>let us move the ownership with <code>MoveTemp</code> API. this code makes <code>AnotherPtr</code> point the memory and <code>UserInformation</code> set the <code>nullptr</code>.</p><img src="/2020/03/14/unreal-unique-pointer/04.jpg" class=""><p><code>UserInformation</code> has <code>nullptr</code>. so we can avoid the exception.</p><hr><h1 id="summary"><a href="#summary" class="headerlink" title="summary"></a><em>summary</em></h1><p><code>TUniquePtr</code> is similar to <code>std::unique_ptr</code> and its usage and restriction, too.</p><ul><li>initialization: you can initialize <code>TUniquePtr</code> with 2 ways</li></ul><table><thead><tr><th>type</th><th>method</th></tr></thead><tbody><tr><td>using raw pointer</td><td><code>TUniquePtr&lt;T&gt; PointerA(T*);</code></td></tr><tr><td>using other <code>TUniquePtr</code></td><td><code>TUniquePtr&lt;T&gt; PointerA(MoveTemp(PointerB));</code></td></tr></tbody></table><ul><li>transfering ownership: for preventing side effect, you should use <code>MoveTemp</code></li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">TUniquePtr&lt;T&gt; PointerA = <span class="keyword">new</span> T(...);</span><br><span class="line">TUniquePtr&lt;T&gt; PointerB;</span><br><span class="line">PointerB = MoveTemp(PointerA);</span><br></pre></td></tr></table></figure><ul><li>release: there are various ways to release the <code>TUniquePtr</code></li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// way #1 : release implicitly</span></span><br><span class="line">PointerA = <span class="literal">nullptr</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// way #2 : release explicitly</span></span><br><span class="line">PointerB.Release();</span><br><span class="line"></span><br><span class="line">&#123;   <span class="comment">// way #3 : using scope</span></span><br><span class="line">    TUniquePtr&lt;T&gt; PointerC = <span class="keyword">new</span> T(...);</span><br><span class="line">    ....</span><br><span class="line">&#125;   <span class="comment">// the destructor of PointerC is called when this block ends</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;ul&gt;
&lt;li&gt;this post covers&lt;ul&gt;
&lt;li&gt;what is unique pointer in unreal engine&lt;/li&gt;
&lt;li&gt;how it is used&lt;/li&gt;
&lt;li&gt;restriction and caution on usage&lt;
      
    
    </summary>
    
    
    
      <category term="UnrealEngine" scheme="https://baemincheon.github.io/tags/UnrealEngine/"/>
    
      <category term="SmartPointer" scheme="https://baemincheon.github.io/tags/SmartPointer/"/>
    
      <category term="UniquePointer" scheme="https://baemincheon.github.io/tags/UniquePointer/"/>
    
  </entry>
  
  <entry>
    <title>unreal-cpp-ctor-and-dtor</title>
    <link href="https://baemincheon.github.io/2020/03/01/unreal-cpp-ctor-and-dtor/"/>
    <id>https://baemincheon.github.io/2020/03/01/unreal-cpp-ctor-and-dtor/</id>
    <published>2020-03-01T12:15:46.000Z</published>
    <updated>2020-08-30T15:42:43.250Z</updated>
    
    <content type="html"><![CDATA[<ul><li>this post covers<ul><li>what do cpp ctor and dtor do in unreal engine</li><li>what is the <code>CDO</code> in unreal engine</li><li>what are the ctor and dtor of <code>UCLASS</code></li><li>difference between cpp ctor/dtor and <code>UCLASS</code> ctor/dtor</li></ul></li><li>environment<ul><li>Unreal Engine (4.24)</li><li>Visual Studio 2017</li><li>Windows 10</li></ul></li><li>reference<ol><li><a href="https://docs.unrealengine.com/en-US/Programming/UnrealArchitecture/Objects/index.html" target="_blank" rel="noopener">https://docs.unrealengine.com/en-US/Programming/UnrealArchitecture/Objects/index.html</a></li><li><a href="https://docs.unrealengine.com/en-US/Programming/UnrealArchitecture/Reference/Classes/index.html" target="_blank" rel="noopener">https://docs.unrealengine.com/en-US/Programming/UnrealArchitecture/Reference/Classes/index.html</a></li><li><a href="https://www.unrealengine.com/en-US/blog/unreal-property-system-reflection" target="_blank" rel="noopener">https://www.unrealengine.com/en-US/blog/unreal-property-system-reflection</a></li></ol></li></ul><hr><h1 id="overview"><a href="#overview" class="headerlink" title="overview"></a><em>overview</em></h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">UCLASS(config=Game)</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AProjectSandboxCharacter</span> :</span> <span class="keyword">public</span> ACharacter</span><br><span class="line">&#123;</span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    AProjectSandboxCharacter();</span><br><span class="line">    <span class="keyword">virtual</span> ~AProjectSandboxCharacter();</span><br><span class="line"></span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></br><img src="/2020/03/01/unreal-cpp-ctor-and-dtor/01.jpg" class=""><p>somebody may have the experience your breakpoint stops in cpp constructor even the object is not placed in the world. you might say,<br><code>&quot;Why this happens ? I do not get it why the constructor is called even while opening editor !&quot;</code></p><img src="/2020/03/01/unreal-cpp-ctor-and-dtor/02.jpg" class=""><p>vice versa, destructor is called when editor is closed. in your intuition, the cpp constructor or destructor seems to be called when the actor is created or deleted. but it does not as you saw. then, let us find what do cpp ctor and dtor do in unreal engine. we would get a clue to truth through it.</p><hr><h1 id="class-default-object"><a href="#class-default-object" class="headerlink" title="class default object"></a><em>class default object</em></h1><p>unreal engine provides their own macro system, which has several features below:</p><ul><li>garbage collection</li><li>reference update</li><li>reflection</li><li>serialization</li><li>etc.</li></ul><p>to support these features, unreal engine constructed massive macro magics and hacks. so, cpp in unreal engine acts unlike cpp as we know. this ctor/dtor issue is one of them(different behaviors). from <a href="https://docs.unrealengine.com/en-US/Programming/UnrealArchitecture/Reference/Classes/index.html" target="_blank" rel="noopener">reference #2</a>, we can find the reference of <code>Class Default Object, CDO</code>.</p><img src="/2020/03/01/unreal-cpp-ctor-and-dtor/03.jpg" class=""><p>cpp constructor makes the <code>Class Default Object</code> and it is copied whenever you create instance of the <code>UObject</code>. what <code>UObject</code> means in this post, is the object created by <code>NewObject</code> API. from <a href="https://docs.unrealengine.com/en-US/Programming/UnrealArchitecture/Objects/index.html" target="_blank" rel="noopener">reference #1</a>, we can find the reference of <code>NewObject</code> API.</p><img src="/2020/03/01/unreal-cpp-ctor-and-dtor/04.jpg" class=""><p>in summary…</p><ul><li>if your class(or somewhat) should be utilized with APIs of unreal engine, this must inherit <code>UObject</code> and follow some conventions</li><li>if you do that, your class gonna have <code>CDO</code>, which is used for cloning object instance</li><li>in this condition, cpp ctor/dtor only works for <code>CDO</code></li></ul><p>※ for more information of <code>CDO</code>, visit <a href="https://docs.unrealengine.com/en-US/Programming/UnrealArchitecture/Objects/index.html" target="_blank" rel="noopener">reference #1</a> and <a href="https://docs.unrealengine.com/en-US/Programming/UnrealArchitecture/Reference/Classes/index.html" target="_blank" rel="noopener">reference #2</a><br>※ for more information of <code>Unreal Reflection</code>, visit <a href="https://www.unrealengine.com/en-US/blog/unreal-property-system-reflection" target="_blank" rel="noopener">reference #3</a></p><hr><h1 id="real-ctor-dtor-for-unreal"><a href="#real-ctor-dtor-for-unreal" class="headerlink" title="real ctor/dtor for unreal"></a><em>real ctor/dtor for unreal</em></h1><p>that is why we could see that the breakpoint stops at cpp ctor/dtor before unreal editor opens. <code>CDO</code> is needed to display the asset editor of the class. try some tests for yourself.</p><img src="/2020/03/01/unreal-cpp-ctor-and-dtor/05.jpg" class=""></br><img src="/2020/03/01/unreal-cpp-ctor-and-dtor/06.jpg" class=""><p>the pictures above says, changes in cpp ctor will be shown in asset editor (if the asset inherits the class). not only the simple <code>float</code> variables, but it affects the various component or material things.</p><p>so, let us suppose real ctor/dtor for unreal should do its work when the instance of class is created in “game”, such as spawning bullets when player shoots the gun. there are several APIs for this purpose, but every child of <code>UObject</code> does not have common API.</p><p>here is a table for major classes. almost of gameplay framework classes inherit them.</p><table><thead><tr><th>child</th><th>function</th></tr></thead><tbody><tr><td><code>UUserWidget</code></td><td><code>UUserWidget::NativeConstruct</code></td></tr><tr><td><code>AActor</code></td><td><code>AActor::OnConstruction</code></td></tr><tr><td><code>UActorComponent</code></td><td><code>UActorComponent::InitializeComponent</code></td></tr></tbody></table><hr><h1 id="summary"><a href="#summary" class="headerlink" title="summary"></a><em>summary</em></h1><ul><li>due to supporting several features, cpp in unreal engine acts unlike cpp as we know.</li><li>cpp ctor/dtor is for <code>CDO</code>, not for the cloned instances in “game”. there are seperate APIs for them.<ul><li>and it differs upon a class. there is no common unreal ctor/dtor.</li></ul></li><li>if you plan to make custom class inherits <code>UObject</code>, you should consider how to make unreal ctor/dtor for it.<ul><li>or just let the class inherits a class already implemented unreal ctor/dtor, such as <code>UUserWidget</code></li></ul></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;ul&gt;
&lt;li&gt;this post covers&lt;ul&gt;
&lt;li&gt;what do cpp ctor and dtor do in unreal engine&lt;/li&gt;
&lt;li&gt;what is the &lt;code&gt;CDO&lt;/code&gt; in unreal engine&lt;/li&gt;

      
    
    </summary>
    
    
    
      <category term="UnrealEngine" scheme="https://baemincheon.github.io/tags/UnrealEngine/"/>
    
  </entry>
  
  <entry>
    <title>unreal-widget-coordinate-system</title>
    <link href="https://baemincheon.github.io/2020/02/09/unreal-widget-coordinate-system/"/>
    <id>https://baemincheon.github.io/2020/02/09/unreal-widget-coordinate-system/</id>
    <published>2020-02-09T10:46:17.000Z</published>
    <updated>2020-08-30T15:43:16.077Z</updated>
    
    <content type="html"><![CDATA[<ul><li>this post covers<ul><li>introduction to widget coordinate system</li><li>what is <code>FGeometry</code> is</li><li>how to get transform of widget</li><li>the meaning of each part of transform</li><li>tips for manipulating widget transform</li></ul></li><li>environment<ul><li>Unreal Engine (4.24)</li><li>Visual Studio 2017</li><li>Windows 10</li></ul></li><li>reference<ol><li><a href="https://docs.unrealengine.com/en-US/API/Runtime/SlateCore/Layout/FGeometry/index.html" target="_blank" rel="noopener">https://docs.unrealengine.com/en-US/API/Runtime/SlateCore/Layout/FGeometry/index.html</a></li><li><a href="https://wiki.unrealengine.com/index.php?title=UE4_Transform_Calculus_-_Part_1" target="_blank" rel="noopener">https://wiki.unrealengine.com/index.php?title=UE4_Transform_Calculus_-_Part_1</a></li><li><a href="https://wiki.unrealengine.com/index.php?title=UE4_Transform_Calculus_-_Part_2" target="_blank" rel="noopener">https://wiki.unrealengine.com/index.php?title=UE4_Transform_Calculus_-_Part_2</a></li></ol></li></ul><hr><h1 id="widget-coordinate-system"><a href="#widget-coordinate-system" class="headerlink" title="widget coordinate system"></a><em>widget coordinate system</em></h1><img src="/2020/02/09/unreal-widget-coordinate-system/02.jpg" class=""><p>suppose you have a game window. it might look like the picture and focus onto the popup widget</p><img src="/2020/02/09/unreal-widget-coordinate-system/03.jpg" class=""><p>in this condition, we can call the coordinate system as <code>Window Space</code></p><ul><li><code>Window Space</code><ul><li>a space has an origin with left-top of window</li><li>we can use this coordinate system for getting certain position in window</li></ul></li></ul><img src="/2020/02/09/unreal-widget-coordinate-system/04.jpg" class=""><p>even we can imagine the coordinate system <code>Monitor Space</code></p><ul><li><code>Monitor Space</code><ul><li>a space has an origin with left-top of monitor</li><li>we can use this coordinate system for getting certain position in monitor</li></ul></li></ul><p>※ position values are approximate<br>※ these terms are not official. they are just used for explaining this post</p><h1 id="FGeometry-introduction"><a href="#FGeometry-introduction" class="headerlink" title="FGeometry introduction"></a><em><code>FGeometry</code> introduction</em></h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">UnrealEngine/Engine/Source/Runtime/SlateCore/Public/Layout/Geometry.h</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Represents the position, size, and absolute position of a Widget in Slate.</span></span><br><span class="line"><span class="comment"> * The absolute location of a geometry is usually screen space or</span></span><br><span class="line"><span class="comment"> * window space depending on where the geometry originated.</span></span><br><span class="line"><span class="comment"> * Geometries are usually paired with a SWidget pointer in order</span></span><br><span class="line"><span class="comment"> * to provide information about a specific widget (see FArrangedWidget).</span></span><br><span class="line"><span class="comment"> * A Geometry's parent is generally thought to be the Geometry of the</span></span><br><span class="line"><span class="comment"> * the corresponding parent widget.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">USTRUCT(BlueprintType)</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">SLATECORE_API</span> <span class="title">FGeometry</span></span></span><br></pre></td></tr></table></figure><ul><li>in unreal engine, <code>FGeometry</code> can help getting those transforms mentioned above</li><li>the <code>FGeometry</code><ul><li>contains useful data for widget especially the transform</li><li>is updated whenever widget is painted or ticked</li></ul></li><li>every variance to transform is accumulated in <code>FGeometry</code><ul><li>in short, each tick, every widget has latest information for calculating transform</li></ul></li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">UnrealEngine/Engine/Source/Runtime/SlateCore/Private/Widgets/SWidget.h</span><br><span class="line"></span><br><span class="line"><span class="comment">//UE_DEPRECATED(4.23, "GetCachedGeometry has been deprecated, use GetTickSpaceGeometry instead")</span></span><br><span class="line"><span class="function"><span class="keyword">const</span> FGeometry&amp; <span class="title">GetCachedGeometry</span><span class="params">()</span> <span class="keyword">const</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Gets the last geometry used to Tick the widget.  This data may not exist yet if this call happens prior to</span></span><br><span class="line"><span class="comment"> * the widget having been ticked/painted, or it may be out of date, or a frame behind.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * We recommend not to use this data unless there's no other way to solve your problem.  Normally in Slate we</span></span><br><span class="line"><span class="comment"> * try and handle these issues by making a dependent widget part of the hierarchy, as to avoid frame behind</span></span><br><span class="line"><span class="comment"> * or what are referred to as hysteresis problems, both caused by depending on geometry from the previous frame</span></span><br><span class="line"><span class="comment"> * being used to advise how to layout a dependent object the current frame.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">const</span> FGeometry&amp; <span class="title">GetTickSpaceGeometry</span><span class="params">()</span> <span class="keyword">const</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Gets the last geometry used to Tick the widget.  This data may not exist yet if this call happens prior to</span></span><br><span class="line"><span class="comment"> * the widget having been ticked/painted, or it may be out of date, or a frame behind.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">const</span> FGeometry&amp; <span class="title">GetPaintSpaceGeometry</span><span class="params">()</span> <span class="keyword">const</span></span>;</span><br></pre></td></tr></table></figure><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">UnrealEngine/Engine/Source/Runtime/SlateCore/Private/Widgets/SWidget.cpp</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> FGeometry&amp; SWidget::GetCachedGeometry() <span class="keyword">const</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> GetTickSpaceGeometry();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> FGeometry&amp; SWidget::GetTickSpaceGeometry() <span class="keyword">const</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> PersistentState.DesktopGeometry;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> FGeometry&amp; SWidget::GetPaintSpaceGeometry() <span class="keyword">const</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> PersistentState.AllottedGeometry;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>we can get <code>FGeometry</code> object via <code>SWidget::Get*Geometry()</code> series<ul><li>FYI, <code>SWidget::GetCachedGeometry()</code> has been deprecated from 4.23</li></ul></li><li>for general purpose, you can use any getter<ul><li><code>DesktopGeometry</code> and <code>AllottedGeometry</code> are not that different</li><li>but unreal engine recommend you to use <code>AllottedGeometry</code> one</li></ul></li></ul><p>※ for more information, visit <a href="https://docs.unrealengine.com/en-US/API/Runtime/SlateCore/Layout/FGeometry/index.html" target="_blank" rel="noopener">reference #1</a> + <a href="https://wiki.unrealengine.com/index.php?title=UE4_Transform_Calculus_-_Part_1" target="_blank" rel="noopener">reference #2</a> + <a href="https://wiki.unrealengine.com/index.php?title=UE4_Transform_Calculus_-_Part_2" target="_blank" rel="noopener">reference #3</a></p><h1 id="FGeometry-APIs"><a href="#FGeometry-APIs" class="headerlink" title="FGeometry APIs"></a><em><code>FGeometry</code> APIs</em></h1><ul><li><code>GetLocalSize()</code></li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">UnrealEngine/Engine/Source/Runtime/SlateCore/Public/Layout/Geometry.h</span><br><span class="line"></span><br><span class="line"><span class="comment">/** @return the size of the geometry in local space. */</span></span><br><span class="line"><span class="function">FORCEINLINE <span class="keyword">const</span> FVector2D&amp; <span class="title">GetLocalSize</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123; <span class="keyword">return</span> Size; &#125;</span><br></pre></td></tr></table></figure><p>returns a size in local space. this size is usually determined with value set in editor</p><ul><li><code>GetAbsoluteSize()</code></li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">UnrealEngine/Engine/Source/Runtime/SlateCore/Public/Layout/Geometry.h</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Get the absolute size of the geometry in render space.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function">FORCEINLINE FVector2D <span class="title">GetAbsoluteSize</span><span class="params">()</span> <span class="keyword">const</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> AccumulatedRenderTransform.TransformVector(GetLocalSize());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>returns a size in outer space. this size is based on your screen, which is real size</p><ul><li><code>LocalToViewport()</code></li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">UnrealEngine/Engine/Source/Runtime/UMG/Public/Blueprint/SlateBlueprintLibrary.h</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Translates local coordinate of the geometry provided into local viewport coordinates.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * @param PixelPosition The position in the game's viewport, usable for line traces and </span></span><br><span class="line"><span class="comment"> * other uses where you need a coordinate in the space of viewport resolution units.</span></span><br><span class="line"><span class="comment"> * @param ViewportPosition The position in the space of other widgets in the viewport.  Like if you wanted</span></span><br><span class="line"><span class="comment"> * to add another widget to the viewport at the same position in viewport space as this location, this is</span></span><br><span class="line"><span class="comment"> * what you would use.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">UFUNCTION(BlueprintPure, Category=<span class="string">"User Interface|Geometry"</span>, meta=( WorldContext=<span class="string">"WorldContextObject"</span> ))</span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">LocalToViewport</span><span class="params">(UObject* WorldContextObject, <span class="keyword">const</span> FGeometry&amp; Geometry, FVector2D LocalCoordinate, FVector2D&amp; PixelPosition, FVector2D&amp; ViewportPosition)</span></span>;</span><br></pre></td></tr></table></figure><p>returns positions in outer space and local space respectively with parameters, which are <code>PixelPosition</code> and <code>ViewportPosition</code></p><ul><li><code>LocalToAbsolute()</code></li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">UnrealEngine/Engine/Source/Runtime/UMG/Public/Blueprint/SlateBlueprintLibrary.h</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Translates local coordinates into absolute coordinates</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * Absolute coordinates could be either desktop or window space depending on what space the root of the widget hierarchy is in.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * @return  Absolute coordinates</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">UFUNCTION(BlueprintPure, Category=<span class="string">"User Interface|Geometry"</span>)</span><br><span class="line"><span class="function"><span class="keyword">static</span> FVector2D <span class="title">LocalToAbsolute</span><span class="params">(<span class="keyword">const</span> FGeometry&amp; Geometry, FVector2D LocalCoordinate)</span></span>;</span><br></pre></td></tr></table></figure><p>returns a position in <code>Monitor Space</code></p><h1 id="how-to-use"><a href="#how-to-use" class="headerlink" title="how to use"></a><em>how to use</em></h1><p>those APIs can be used for calculating transform. let us find out how to use them</p><img src="/2020/02/09/unreal-widget-coordinate-system/05.jpg" class=""></br><img src="/2020/02/09/unreal-widget-coordinate-system/09.jpg" class=""></br><img src="/2020/02/09/unreal-widget-coordinate-system/10.jpg" class=""></br><img src="/2020/02/09/unreal-widget-coordinate-system/11.jpg" class=""></br><img src="/2020/02/09/unreal-widget-coordinate-system/12.jpg" class=""><table><thead><tr><th>Child</th><th>Position</th><th>Size</th><th>Parent</th></tr></thead><tbody><tr><td>Red One</td><td>(100, 50)</td><td>(60, 30)</td><td>Canvas Panel #1</td></tr><tr><td>Green One</td><td>(0, 0)</td><td>(60, 30)</td><td>Canvas Panel #2</td></tr><tr><td>Blue One</td><td>NaN</td><td>(60, 30)</td><td>Horizontal Box</td></tr><tr><td>White One</td><td>NaN</td><td>(60, 30)</td><td>Horizontal Box</td></tr></tbody></table><p>we gotta use this widget for example. the widget has children with multiple depth. each editor property of child is above</p><img src="/2020/02/09/unreal-widget-coordinate-system/06.jpg" class=""></br><img src="/2020/02/09/unreal-widget-coordinate-system/07.jpg" class=""></br><img src="/2020/02/09/unreal-widget-coordinate-system/08.jpg" class=""><p>※ transform property can be divided into <em>local</em> and <em>absolute</em> due to <code>DPI Scale</code><br>※ in this example(and also default value), we got <code>DPI Scale = 2/3</code> which means that every property gets multiplied with 0.666666…</p><ul><li><p><code>Window Space</code></p><ul><li>widget<ul><li>size<img src="/2020/02/09/unreal-widget-coordinate-system/13.jpg" class=""><ul><li>local = <code>Widget-&gt;GetCachedGeometry()-&gt;GetLocalSize()</code><img src="/2020/02/09/unreal-widget-coordinate-system/14.jpg" class=""></li><li>absolute = <code>Widget-&gt;GetCachedGeometry()-&gt;GetAbsoluteSize()</code><br>  <em>(60, 30) * 0.666666… ≒ (39.99996…, 19.99998…)</em></li></ul></li><li>position<img src="/2020/02/09/unreal-widget-coordinate-system/15.jpg" class=""><ul><li>local = <code>Widget-&gt;GetCachedGeometry()-&gt;LocalToViewport()-&gt;ViewportPosition</code><img src="/2020/02/09/unreal-widget-coordinate-system/16.jpg" class=""></li><li>absolute = <code>Widget-&gt;GetCachedGeometry()-&gt;LocalToViewport()-&gt;PixelPosition</code><br>  <em>(100, 50) * 0.666666… ≒ (66.66666…, 33.33333…)</em></li></ul></li></ul></li></ul></li><li><p>verification (with Adobe Photoshop)</p><img src="/2020/02/09/unreal-widget-coordinate-system/20.jpg" class=""><ul><li>widget<ul><li>size<img src="/2020/02/09/unreal-widget-coordinate-system/17.jpg" class=""></br><img src="/2020/02/09/unreal-widget-coordinate-system/18.jpg" class=""></li><li>position<img src="/2020/02/09/unreal-widget-coordinate-system/19.jpg" class=""></li></ul></li></ul></li><li><p><code>Monitor Space</code></p><ul><li>window<ul><li>size<ul><li>local<img src="/2020/02/09/unreal-widget-coordinate-system/22.jpg" class="">approximately 1920x1080</li><li>absolute<img src="/2020/02/09/unreal-widget-coordinate-system/23.jpg" class="">  <em>(1920, 1080) * 0.666666… = (1280, 720)</em></li></ul></li><li>position<ul><li>local<img src="/2020/02/09/unreal-widget-coordinate-system/25.jpg" class=""></br><img src="/2020/02/09/unreal-widget-coordinate-system/26.jpg" class="">cannot calculate. also not meaningful, unless the `DPI Scale` is the same with system's one</li><li>absolute<img src="/2020/02/09/unreal-widget-coordinate-system/24.jpg" class=""></li></ul></li></ul></li><li>widget<ul><li>size<br>the same with before</li><li>position<ul><li>local<br>cannot calculate. also not meaningful, unless the <code>DPI Scale</code> is the same with system’s one</li><li>absolute<img src="/2020/02/09/unreal-widget-coordinate-system/21.jpg" class=""></li></ul></li></ul></li></ul></li><li><p>verification (with Adobe Photoshop)</p><img src="/2020/02/09/unreal-widget-coordinate-system/27.jpg" class=""><ul><li>window<ul><li>size<img src="/2020/02/09/unreal-widget-coordinate-system/28.jpg" class=""></br><img src="/2020/02/09/unreal-widget-coordinate-system/29.jpg" class=""></li><li>position<img src="/2020/02/09/unreal-widget-coordinate-system/30.jpg" class=""></li></ul></li><li>widget<ul><li>size<br>the same with before</li><li>position<img src="/2020/02/09/unreal-widget-coordinate-system/31.jpg" class=""></li></ul></li></ul></li></ul><p><code>Window Space</code> summary</p><table><thead><tr><th>Property</th><th>Widget</th></tr></thead><tbody><tr><td>Size.Local</td><td>(60, 30)</td></tr><tr><td>Size.Absolute</td><td>(40, 20)</td></tr><tr><td>Position.Local</td><td>(100, 50)</td></tr><tr><td>Position.Absolute</td><td>(66, 33)</td></tr></tbody></table><p><code>Monitor Space</code> summary</p><table><thead><tr><th>Property</th><th>Window</th><th>Widget</th></tr></thead><tbody><tr><td>Size.Local</td><td>(1920, 1080)</td><td>(60, 30)</td></tr><tr><td>Size.Absolute</td><td>(1280, 720)</td><td>(40, 20)</td></tr><tr><td>Position.Local</td><td>NaN</td><td>NaN</td></tr><tr><td>Position.Absoulte</td><td>(640, 350)</td><td>(640 + 66, 350 + 33) = (706, 383)</td></tr></tbody></table><h1 id="widget-translation"><a href="#widget-translation" class="headerlink" title="widget translation"></a><em>widget translation</em></h1><p>suppose you have to translate a widget into certain position. how will you ?<br>first, we need to check whether the slot of widget has <code>SetPosition</code> API. if the slot does not, we cannot do widget translation<br>but we can do it, as the red image was in <code>Canvas Panel</code></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">UnrealEngine/Engine/Source/Runtime/UMG/Public/Components/CanvasPanelSlot.h</span><br><span class="line"></span><br><span class="line"><span class="comment">/** Sets the position of the slot */</span></span><br><span class="line">UFUNCTION(BlueprintCallable, Category=<span class="string">"Layout|Canvas Slot"</span>)</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SetPosition</span><span class="params">(FVector2D InPosition)</span></span>;</span><br></pre></td></tr></table></figure></br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">UnrealEngine/Engine/Source/Runtime/UMG/Public/Components/CanvasPanelSlot.cpp</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> UCanvasPanelSlot::SetPosition(FVector2D InPosition)</span><br><span class="line">&#123;</span><br><span class="line">    LayoutData.Offsets.Left = InPosition.X;</span><br><span class="line">    LayoutData.Offsets.Top = InPosition.Y;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> ( Slot )</span><br><span class="line">    &#123;</span><br><span class="line">        Slot-&gt;Offset(LayoutData.Offsets);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>the parameter <code>InPosition</code> should be local position. it is easy to think, this is the same work with changing value in editor<br>second, we need to get local position of the widget. let us use the example red image again<br>in previous example, red image had a local position of (100, 50) in <code>Window Space</code></p><img src="/2020/02/09/unreal-widget-coordinate-system/09.jpg" class=""></br><img src="/2020/02/09/unreal-widget-coordinate-system/15.jpg" class=""></br><img src="/2020/02/09/unreal-widget-coordinate-system/32.jpg" class=""><p>let us move the widget with offset (100, 50) again<br>third, we need to set local position with new one. in this time, <code>SetPosition(200, 100)</code> will be needed<br>and we gotta check a local position at next tick. the local position would be (200, 100) and absolute position also be twice</p><img src="/2020/02/09/unreal-widget-coordinate-system/33.jpg" class=""></br><img src="/2020/02/09/unreal-widget-coordinate-system/34.jpg" class=""></br><img src="/2020/02/09/unreal-widget-coordinate-system/35.jpg" class=""><ul><li>verification (with Adobe Photoshop)<img src="/2020/02/09/unreal-widget-coordinate-system/36.jpg" class=""><ul><li>size<br>the same with before</li><li>position<ul><li>absolute position in <code>Window Space</code><img src="/2020/02/09/unreal-widget-coordinate-system/37.jpg" class=""></li><li>absolute position in <code>Monitor Space</code><img src="/2020/02/09/unreal-widget-coordinate-system/38.jpg" class=""></li></ul></li></ul></li></ul><p>wrap-up !</p><ul><li>getting local or absolute position is usually possible regardless of layout of widget such as widget hierarchy</li><li>we can only set local position through the API of slot such as <code>Canvas Panel Slot</code></li><li>you need to calculate new position (based on several conditions, especially <code>DPI Scale</code>) to translate widget into desired position</li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;ul&gt;
&lt;li&gt;this post covers&lt;ul&gt;
&lt;li&gt;introduction to widget coordinate system&lt;/li&gt;
&lt;li&gt;what is &lt;code&gt;FGeometry&lt;/code&gt; is&lt;/li&gt;
&lt;li&gt;how to get tr
      
    
    </summary>
    
    
    
      <category term="UnrealEngine" scheme="https://baemincheon.github.io/tags/UnrealEngine/"/>
    
      <category term="Widget" scheme="https://baemincheon.github.io/tags/Widget/"/>
    
  </entry>
  
  <entry>
    <title>home-page</title>
    <link href="https://baemincheon.github.io/2020/02/03/home-page/"/>
    <id>https://baemincheon.github.io/2020/02/03/home-page/</id>
    <published>2020-02-02T15:27:08.000Z</published>
    <updated>2020-08-30T15:55:24.596Z</updated>
    
    <content type="html"><![CDATA[<h3 id="Career"><a href="#Career" class="headerlink" title="Career"></a><em>Career</em></h3><table><thead><tr><th>Period</th><th>Thing</th></tr></thead><tbody><tr><td>2020.03 ~ now</td><td>PUBG live tech team (sub role)</td></tr><tr><td>2019.07 ~ now</td><td>PUBG console platform contents engineering team (main role)</td></tr><tr><td>2014.03 ~ 2020.02</td><td>Major CSE in <a href="https://www.koreatech.ac.kr/kor/Main.do" target="_blank" rel="noopener">Koreatech university</a></td></tr><tr><td>2018.11 ~ 2019.04</td><td>N2 unity client programmer</td></tr><tr><td>2015.05 ~ 2017.02</td><td>Service as <em>Signal Corps</em> in Republic of Korean Army</td></tr></tbody></table><h3 id="Contacts"><a href="#Contacts" class="headerlink" title="Contacts"></a><em>Contacts</em></h3><table><thead><tr><th>Media</th><th>URL</th></tr></thead><tbody><tr><td>Github</td><td><a href="https://github.com/BaeMinCheon" target="_blank" rel="noopener">https://github.com/BaeMinCheon</a></td></tr><tr><td>Facebook</td><td><a href="https://www.facebook.com/Thanyang/" target="_blank" rel="noopener">https://www.facebook.com/Thanyang/</a></td></tr><tr><td>Email</td><td><a href="mailto:baemincheon@gmail.com">baemincheon@gmail.com</a></td></tr></tbody></table>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;Career&quot;&gt;&lt;a href=&quot;#Career&quot; class=&quot;headerlink&quot; title=&quot;Career&quot;&gt;&lt;/a&gt;&lt;em&gt;Career&lt;/em&gt;&lt;/h3&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Period&lt;/th&gt;
&lt;th&gt;Thing&lt;/
      
    
    </summary>
    
    
    
      <category term="Home" scheme="https://baemincheon.github.io/tags/Home/"/>
    
      <category term="About" scheme="https://baemincheon.github.io/tags/About/"/>
    
  </entry>
  
  <entry>
    <title>unreal-blueprint-practical-use</title>
    <link href="https://baemincheon.github.io/2020/01/28/unreal-blueprint-practical-use/"/>
    <id>https://baemincheon.github.io/2020/01/28/unreal-blueprint-practical-use/</id>
    <published>2020-01-28T14:59:47.000Z</published>
    <updated>2020-08-30T15:42:36.660Z</updated>
    
    <content type="html"><![CDATA[<ul><li>this post covers<ul><li>limitation of <code>Hot Reload</code></li><li>the pros and cons of blueprint in Unreal Engine</li><li>what is <code>BlueprintImplementableEvent</code> specifier</li><li>how the <code>BlueprintImplementableEvent</code> can be used</li></ul></li><li>environment<ul><li>Unreal Engine (4.24)</li><li>Visual Studio 2017</li><li>Windows 10</li></ul></li><li>reference<ol><li><a href="https://wiki.unrealengine.com/Hot_Reload" target="_blank" rel="noopener">https://wiki.unrealengine.com/Hot_Reload</a></li><li><a href="https://wiki.unrealengine.com/Blueprint_FAQ_and_Tips" target="_blank" rel="noopener">https://wiki.unrealengine.com/Blueprint_FAQ_and_Tips</a></li><li><a href="https://docs.unrealengine.com/en-US/Programming/UnrealArchitecture/Reference/Functions/Specifiers/index.html" target="_blank" rel="noopener">https://docs.unrealengine.com/en-US/Programming/UnrealArchitecture/Reference/Functions/Specifiers/index.html</a></li></ol></li></ul><hr><h3 id="two-edged-Hot-Reload"><a href="#two-edged-Hot-Reload" class="headerlink" title="two-edged Hot Reload"></a>two-edged <code>Hot Reload</code></h3><ul><li>almost everyone uses this fascinating feature, which accelerates one’s development process</li><li>this feature can make you skip Editor loading, but cannot make you skip CPP compilation<ul><li>in game development using Unreal Engine, most of time is still consumed in CPP compilation</li></ul></li><li>even you may miss some of changes or encounter unexpected bugs<ul><li>this means, <code>Hot Reload</code> feature is not the stable one</li></ul></li></ul><p>※ for more information, see the <a href="https://wiki.unrealengine.com/Hot_Reload" target="_blank" rel="noopener">reference #1</a><br>※ one of the bugs: <a href="https://forums.unrealengine.com/unreal-engine/feedback-for-epic/37624-hot-reload-for-components-is-a-mess-with-the-hotreload-name-bug-at-the-moment" target="_blank" rel="noopener">https://forums.unrealengine.com/unreal-engine/feedback-for-epic/37624-hot-reload-for-components-is-a-mess-with-the-hotreload-name-bug-at-the-moment</a></p><ul><li>then, is there another way to reduce compilation time ?<ul><li>while ensuring not to occur a malfunction ?</li></ul></li><li>now it is time to use blueprint more practically</li></ul><h3 id="blueprint-versus-CPP"><a href="#blueprint-versus-CPP" class="headerlink" title="blueprint versus CPP"></a>blueprint versus CPP</h3><ul><li>as we know, blueprint is useful enough to work with personal project<ul><li>because there are no merge conflict and no number of context switchings in personal project</li></ul></li><li>blueprint usually bullies developers in group project<ul><li>because blueprint asset file is binary, there is no good way to merge them or see them without Editor</li></ul></li><li>but blueprint instead has positive aspects in other sides<ul><li>let us summary the pros and cons of blueprint</li></ul></li></ul><table><thead><tr><th>Item</th><th>Blueprint</th><th>CPP</th></tr></thead><tbody><tr><td>Compilation</td><td>absolutely fast (do not need to compile CPP)</td><td>hell it is so slow (if with Engine build, too ? better kill me)</td></tr><tr><td>View &amp; Diff</td><td>must open Unreal Editor (even some changes cannot be shown)</td><td>can be opened or diffed with common VCS such as git</td></tr><tr><td>Merge</td><td>almost impossible (even need to re-work for rebase)</td><td>not that different from merging an ordinary text file</td></tr><tr><td>Exception Handling</td><td>warning in best and shutting down Game in worst</td><td>unless handling, everyting shuts down (Editor, Game…etc)</td></tr><tr><td>Debugging</td><td>can visit all nodes and variables</td><td>some of codes can be optimized</td></tr></tbody></table><p>※ for more information about <em>Compilation</em> item, see the <a href="https://wiki.unrealengine.com/Blueprint_FAQ_and_Tips" target="_blank" rel="noopener">reference #2</a></p><ul><li>so, as you saw the table, I want to say that “prototyping with blueprint is quite useful”</li><li>in this post, I will show you one of tips to use blueprint efficiently<ul><li>it may be faster than development using <code>Hot Reload</code></li></ul></li></ul><h3 id="BlueprintImplementableEvent"><a href="#BlueprintImplementableEvent" class="headerlink" title="BlueprintImplementableEvent"></a><code>BlueprintImplementableEvent</code></h3><ul><li>blueprint is efficient when it used only for prototyping<ul><li>if you run your project with features implemented with blueprint, there would be much cost:<ul><li>view or diff blueprint asset → time to open Unreal Editor</li><li>merge blueprint asset → time to open Unreal Editor &amp; re-work the changes<br>(+ effort to remember what were the changes)</li><li>…etc</li></ul></li></ul></li><li>the <code>UFUNCTION</code> specifier <code>BlueprintImplementableEvent</code><ul><li>is fit in this purpose</li><li>will help your prototyping with unit of function</li></ul></li></ul><p>※ for more information about <em>BlueprintImplementableEvent</em> specifier, see the <a href="https://docs.unrealengine.com/en-US/Programming/UnrealArchitecture/Reference/Functions/Specifiers/index.html" target="_blank" rel="noopener">reference #3</a></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;&#x2F; This function is designed to be overridden by a blueprint.  Do not provide a body for this function;</span><br><span class="line">&#x2F;&#x2F;&#x2F; the autogenerated code will include a thunk that calls ProcessEvent to execute the overridden body.</span><br><span class="line">BlueprintImplementableEvent</span><br></pre></td></tr></table></figure><ul><li>at <code>ObjectMacro.h</code> we can find the enum of <code>BlueprintImplementableEvent</code> and its comment</li></ul><img src="/2020/01/28/unreal-blueprint-practical-use/01.jpg" class=""><ul><li>the access specifier of function using <code>BlueprintImplementableEvent</code> must not be <code>private</code><ul><li>which means, it must be <code>public</code> or <code>protected</code></li></ul></li></ul><img src="/2020/01/28/unreal-blueprint-practical-use/02.jpg" class=""><ul><li>you cannot implement the body of function in cpp<ul><li>you must implement the body of function in blueprint</li><li>as UBT(unreal build tool) makes an implementation of the <code>BlueprintImplementableEvent</code> function, your cpp implementation causes error</li></ul></li></ul><h3 id="example"><a href="#example" class="headerlink" title="example"></a>example</h3><ul><li>suppose you want to make a simple feature<ul><li>when the game starts, a widget is shown at the center of screen</li><li>the widget is kind of textblock, which contains a text like “Hello World !”</li></ul></li></ul><img src="/2020/01/28/unreal-blueprint-practical-use/03.jpg" class=""><ul><li>let us call the function in <code>BeginPlay()</code><ul><li>when the player controller is created, the <code>NotifyTestFunc()</code> will be executed</li></ul></li></ul><img src="/2020/01/28/unreal-blueprint-practical-use/04.jpg" class=""></br><img src="/2020/01/28/unreal-blueprint-practical-use/05.jpg" class=""><ul><li>add a variable for widget<ul><li>create blueprint class of the cpp player controller</li><li>it can be assigned at the inspector of <code>Class Defaults</code></li></ul></li></ul><img src="/2020/01/28/unreal-blueprint-practical-use/06.jpg" class=""><ul><li>you can implement the function in <code>Event Graph</code><ul><li>let us just show a screen debug message</li></ul></li></ul><img src="/2020/01/28/unreal-blueprint-practical-use/07.jpg" class=""><ul><li>prepare game mode<ul><li>set the game mode, character and player controller as ours</li></ul></li></ul><img src="/2020/01/28/unreal-blueprint-practical-use/08.jpg" class=""><ul><li>screen debug message is shown well</li><li>now let us show the widget</li></ul><img src="/2020/01/28/unreal-blueprint-practical-use/09.jpg" class=""><ul><li>create a widget and add it to viewport</li></ul><img src="/2020/01/28/unreal-blueprint-practical-use/08.jpg" class=""><ul><li>what happened ? I cannot see any widget</li><li>let us see the <code>Message Log</code></li></ul><img src="/2020/01/28/unreal-blueprint-practical-use/10.jpg" class=""><ul><li>the log says, there is access to <code>None</code> at <code>Add to Viewport</code> node<ul><li>add breakpoint at the node and find why</li></ul></li><li>absolutely this could be a crash in cpp code<ul><li>with blueprint, we can keep going unless shuting down the editor</li></ul></li></ul><img src="/2020/01/28/unreal-blueprint-practical-use/11.jpg" class=""></br><img src="/2020/01/28/unreal-blueprint-practical-use/12.jpg" class=""><ul><li>oh, the <code>Target</code> is <code>None</code><ul><li>that is why the message log is created</li></ul></li><li>as we did not assign the class of widget, <code>Create User Widget</code> node returned <code>None</code></li><li>let us create a widget and assign it</li></ul><img src="/2020/01/28/unreal-blueprint-practical-use/13.jpg" class=""></br><img src="/2020/01/28/unreal-blueprint-practical-use/14.jpg" class=""></br><img src="/2020/01/28/unreal-blueprint-practical-use/15.jpg" class=""><ul><li>now it works !<ul><li>almost work is written with blueprint and there is only one cpp compilation</li><li>this development process can improve your productivity</li></ul></li><li>the rest of work is converting the blueprint things into cpp code</li></ul><img src="/2020/01/28/unreal-blueprint-practical-use/16.jpg" class=""><ul><li>you can find cpp implementation in <a href="https://github.com/BaeMinCheon/unreal-project-sandbox/commits/master" target="_blank" rel="noopener">here</a></li></ul><h3 id="wrap-up"><a href="#wrap-up" class="headerlink" title="wrap-up"></a>wrap-up</h3><ul><li><code>Hot Reload</code> is fast enough to develop personal project<ul><li>if you do not take much time to compile cpp, there is no significant benefits to using blueprint</li><li>time to compile cpp can be similar much than blueprint one</li></ul></li><li>blueprint using <code>BlueprintImplementableEvent</code> is useful<ul><li>if it takes more than 5~10 minutes whenever cpp compiles, you should consider blueprint</li><li>but, you need to convert blueprint into cpp when it completes</li></ul></li><li>as a result, the workflow I recommend you is:<ul><li>design a feature as one function with <code>BlueprintImplementableEvent</code></li><li>implement the function with blueprint</li><li>remove blueprint implementation &amp; implement the function with cpp</li></ul></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;ul&gt;
&lt;li&gt;this post covers&lt;ul&gt;
&lt;li&gt;limitation of &lt;code&gt;Hot Reload&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;the pros and cons of blueprint in Unreal Engine&lt;/li&gt;
&lt;li&gt;wh
      
    
    </summary>
    
    
    
      <category term="UnrealEngine" scheme="https://baemincheon.github.io/tags/UnrealEngine/"/>
    
      <category term="Blueprint" scheme="https://baemincheon.github.io/tags/Blueprint/"/>
    
      <category term="HotReload" scheme="https://baemincheon.github.io/tags/HotReload/"/>
    
      <category term="BlueprintImplementableEvent" scheme="https://baemincheon.github.io/tags/BlueprintImplementableEvent/"/>
    
  </entry>
  
  <entry>
    <title>unreal-fname-anatomy</title>
    <link href="https://baemincheon.github.io/2020/01/17/unreal-fname-anatomy/"/>
    <id>https://baemincheon.github.io/2020/01/17/unreal-fname-anatomy/</id>
    <published>2020-01-16T15:09:22.000Z</published>
    <updated>2020-08-30T15:42:59.437Z</updated>
    
    <content type="html"><![CDATA[<ul><li>this post covers<ul><li>what is <code>FName</code> in Unreal Engine</li><li>how <code>FName</code> works</li></ul></li><li>environment<ul><li><em>Custom</em> Unreal Engine (based on 4.24)</li><li>Visual Studio 2017</li><li>Windows 10</li></ul></li><li>reference<ul><li><a href="https://docs.unrealengine.com/en-US/Programming/UnrealArchitecture/StringHandling/FName/index.html" target="_blank" rel="noopener">https://docs.unrealengine.com/en-US/Programming/UnrealArchitecture/StringHandling/FName/index.html</a></li><li><a href="https://docs.unrealengine.com/en-US/API/Runtime/Core/UObject/FScriptName/index.html" target="_blank" rel="noopener">https://docs.unrealengine.com/en-US/API/Runtime/Core/UObject/FScriptName/index.html</a></li><li><a href="https://dq8iqaixvew1d.cloudfront.net/en-US/Programming/Assets/Registry/index.html?lang=zh-CN" target="_blank" rel="noopener">https://dq8iqaixvew1d.cloudfront.net/en-US/Programming/Assets/Registry/index.html?lang=zh-CN</a></li></ul></li></ul><hr><h3 id="what-FName-is"><a href="#what-FName-is" class="headerlink" title="what FName is"></a>what <code>FName</code> is</h3><ul><li>one of the 3 main string types in Unreal Engine, which is used for indicating individual object in game</li><li>as its purpose, <code>FName</code> do not have features for string manipulation such as trim, reverse…etc.</li><li>it would be better to consider <code>FName</code> is a literal index rather than a digital index</li></ul><h3 id="case-insensitive"><a href="#case-insensitive" class="headerlink" title="case-insensitive"></a>case-insensitive</h3><ul><li>you may have seen the expression, “FNames are case-insensitive”, which means you cannot make more than one <code>FName</code> with the same alphabet arrangement</li><li>for example, if you already have an object its name is “Sheri”, you cannot make an object its name is “sheri”. let us see below:</li></ul><img src="/2020/01/17/unreal-fname-anatomy/01.jpg" class=""><ul><li>why this happens ? find it out in the code</li></ul><img src="/2020/01/17/unreal-fname-anatomy/02.jpg" class=""><ul><li>we can find the phrase at the <code>ContentBrowserUtils::IsValidObjectPathForCrate()</code><ul><li>the function validates whether new object can be created in certain directory</li></ul></li><li>as the comment says, the phrase is shown when there is already an object with the same path<ul><li>in other words, you can create an object with the same name in different path</li></ul></li></ul><img src="/2020/01/17/unreal-fname-anatomy/03.jpg" class=""><ul><li>yes, not only object, folder is also affected with the rule</li></ul><h3 id="FName-as-a-hash-value"><a href="#FName-as-a-hash-value" class="headerlink" title="FName as a hash value"></a><code>FName</code> as a hash value</h3><ul><li>now, you should have a question:<ul><li><em>“how does Unreal Engine save the object path ?”</em></li></ul></li><li>we can assume that may be not literal method, rather hash method<ul><li>because literal method would tell us that upper case differs from lower case</li></ul></li></ul><img src="/2020/01/17/unreal-fname-anatomy/04.jpg" class=""><ul><li>digging one step, we can find something strange</li><li>as we saw, the warning pharse is shown when there is already an object with the same path<ul><li>we can see returning some object ( that is not <code>nullptr</code> ) in picture above</li></ul></li><li><code>ObjectPath</code> does not have the identical indices<ul><li>especially, <code>ComparisonIndex</code> and <code>DisplayIndex</code></li><li>strangefully, <code>DisplayIndex</code> indicates the intended string, other does not</li></ul></li></ul><p>※ more information about the indices in #2 reference</p><img src="/2020/01/17/unreal-fname-anatomy/05.jpg" class=""></br><img src="/2020/01/17/unreal-fname-anatomy/06.jpg" class=""><ul><li>digging one step more, <code>ComparisonIndex</code> is set by one of <code>FName</code> that is created earlier<ul><li>it may be confusing, let us summary as table</li></ul></li></ul><table><thead><tr><th>String</th><th>ComparisonIndex</th></tr></thead><tbody><tr><td><code>Sheri</code> (AssetName)</td><td>884751</td></tr><tr><td><code>/Game/ThirdPersonCPP/Blueprints/Sheri.Sheri</code> (ObjectPath)</td><td>884754</td></tr><tr><td><code>sheri</code> (AssetName)</td><td>886628</td></tr><tr><td><code>/Game/ThirdPersonCPP/Blueprints/sheri.sheri</code> (ObjectPath)</td><td>886631</td></tr></tbody></table><p>※ the value of index is not consistent. it can have a different value each time<br>※ more information about the names and pathes in #3 reference</p><h3 id="lower-case-string-compare"><a href="#lower-case-string-compare" class="headerlink" title="lower-case string compare"></a>lower-case string compare</h3><ul><li>digging one step more !!<ul><li>why did later one set by earlier one ?</li></ul></li><li>let us look at <code>StaticFindObjectFastInternalThreadSafe()</code><ul><li>the function finds and returns an certain object(or package) depending on parameters</li></ul></li></ul><img src="/2020/01/17/unreal-fname-anatomy/07.jpg" class=""><ul><li>at line #588, there is an <code>==</code> operation between two <code>FName</code>s<ul><li>if they are the same, the expression must become true</li></ul></li><li>then, we got the one last destination <code>FName::operator==()</code><ul><li>actually, we should go to <code>StrnicmpImpl()</code> due to the callstack below</li><li><code>FName::operator==() → FNameHelper::EqualString() → StringAndNumberEqualsString() → FPlatformString::Strnicmp() → StrnicmpImpl()</code></li></ul></li></ul><img src="/2020/01/17/unreal-fname-anatomy/08.jpg" class=""><ul><li>in this function, each character of each string is compared in lower case</li><li>now we understand why <code>Sheri</code> and <code>sheri</code> are identical in using <code>FName</code></li></ul><h3 id="wrap-up"><a href="#wrap-up" class="headerlink" title="wrap-up"></a>wrap-up</h3><ul><li><code>FName</code> is not identified with case<ul><li>we could see it with <code>Sheri</code> and <code>sheri</code> example</li><li>every <code>FName</code> is compared in lower case</li></ul></li><li><code>FName</code> is used with index format<ul><li>for effectiveness, real string is cached and is accessed with index</li><li>there are two indices, <code>ComparisonIndex</code> and <code>DisplayIndex</code></li></ul></li><li><code>FName</code> duplication test is relying on path name<ul><li>you can have two objects such as <code>/Game/Sheri/Umbrella</code> and <code>/Game/Donita/Umbrella</code></li><li>this means that the same <code>AssetName</code> can exist multiple times in one project</li></ul></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;ul&gt;
&lt;li&gt;this post covers&lt;ul&gt;
&lt;li&gt;what is &lt;code&gt;FName&lt;/code&gt; in Unreal Engine&lt;/li&gt;
&lt;li&gt;how &lt;code&gt;FName&lt;/code&gt; works&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;env
      
    
    </summary>
    
    
    
      <category term="UnrealEngine" scheme="https://baemincheon.github.io/tags/UnrealEngine/"/>
    
      <category term="FName" scheme="https://baemincheon.github.io/tags/FName/"/>
    
  </entry>
  
  <entry>
    <title>retrospection-2019</title>
    <link href="https://baemincheon.github.io/2019/12/24/retrospection-2019/"/>
    <id>https://baemincheon.github.io/2019/12/24/retrospection-2019/</id>
    <published>2019-12-24T13:34:51.000Z</published>
    <updated>2020-08-30T15:14:51.397Z</updated>
    
    <content type="html"><![CDATA[<h1 id="overview"><a href="#overview" class="headerlink" title="overview"></a><em>overview</em></h1><img src="/2019/12/24/retrospection-2019/12.jpg" class=""><p>it is first time to write retrospection as a post. with starting a job for game programming and wraping up my university activity, I thought it is good time to write it. regardless of anyone, every new year is the hardest one. yeap, this year was so hard and eventful to me. so you can see me grumble in this post many times. anyway, that would be a retrospection too.</p><p>timeline is below:</p><ul><li>being a senior year in university</li><li>having a role of leader in HPC Lab</li><li>working at a start-up company as part-time job</li><li>moving in Seoul for work</li><li>getting a full-time job at PUBG</li></ul><hr><h1 id="graduation"><a href="#graduation" class="headerlink" title="graduation"></a><em>graduation</em></h1><p>being a senior year, as same as usual university, I had to do several tasks for graduation. some of them are easy, but others are not. that below is why:</p><ul><li><p><code>internship as credit (-&gt; internship issue)</code><br>in my university, student must have an internship for essential credit. in other words, students did not have internship cannot graduate, even they are hired with regular job. making matters worse, only an internship satisfying terms of agreement made by the university is approved to get the essential credit. otherwise, the student cannot get the essential credit.</p></li><li><p><code>graduation project</code><br>like the internship issue, student must complete an project for essential credit. the scale of project is usually forced to be big as possible as by professors, which have right to pass project. that means, you cannot throw away the graduation project with the mind “I do not care that one bit of shit.”.</p></li></ul><p>first of all, the two issues have been solved…but there were so much pain. X( …especially the internship issue tortured me for 1~2 months.</p><img src="/2019/12/24/retrospection-2019/01.jpg" class=""><p>the agreement mentioned above should be reviewed by company’s legal team and personnel team. in worst case, they could reject the agreement. even they accept the agreement, university could reject your request of essential credit for the reason the internship period is not fit in some schedule they planned. crap ! though students should take care of everything unnecessary, university insists this system help the students get a job. actually, I could not get the essential credit with my first internship for complicated reasons. I do not want to tell about it more…just disgusting. university made me fight to company and themselves. early 2019 was that time mentally weak.</p><img src="/2019/12/24/retrospection-2019/02.jpg" class=""><p>graduation project, this one bullied me too. I could not choose my team member by myself, and the members to go with were very passive. that is, they did not proceed the project on themselves. I had to take care of both development and team management. although I had many tasks to do, the project has been made most by me. anyway, on developing the project, I found this funny moment: <a href="https://twitter.com/Thanang/status/1171038097024307200?s=20" target="_blank" rel="noopener">https://twitter.com/Thanang/status/1171038097024307200?s=20</a> my graduation project was about automation of making game agent. mainly used Tensorflow and BizHawk, Tensorflow as machine learning framework and BizHawk as reinforcement learning environment. you can visit the repository in my github: <a href="https://github.com/BaeMinCheon/BizHawk" target="_blank" rel="noopener">https://github.com/BaeMinCheon/BizHawk</a> and <a href="https://github.com/BaeMinCheon/street-fighter-agent" target="_blank" rel="noopener">https://github.com/BaeMinCheon/street-fighter-agent</a></p><hr><h1 id="lectures"><a href="#lectures" class="headerlink" title="lectures"></a><em>lectures</em></h1><img src="/2019/12/24/retrospection-2019/03.jpg" class=""><p>took various lectures, too. specially, lecture multicore-programming (-&gt; MP) and virtual-reality-programming (-&gt; VRP) are remained in my memory. in MP, I learned CUDA and could improve it with several projects. these experiences gave me insight of multi-thread things. and it helped me when the multi-thread subject were appeared at job interview in future. I learned VR and AR with intuitive explanation in VRP. thanks to the professor, I could get more understanding on Unity Engine and its usage. this helped me after when I use Unity Engine at start-up part-time job. the project repo is: <a href="https://github.com/beat-kids" target="_blank" rel="noopener">https://github.com/beat-kids</a></p><hr><h1 id="laboratory-activities"><a href="#laboratory-activities" class="headerlink" title="laboratory activities"></a><em>laboratory activities</em></h1><img src="/2019/12/24/retrospection-2019/04.jpg" class=""><p>in previous year, 2018, I entered laboratory specialized in high performance computing (-&gt; HPC) on my foot. mid 2018, I started a role of undergraduate researcher in the HPC lab. from the time, studying machine learning and multi-core programming, I got much experience and intense feedback from professor. though this activity was light than a graduate course, I could learn many things useful: how to research, how to present and how to write English. feeling being respected, I could do my best on HPC tasks and get more skills.</p><img src="/2019/12/24/retrospection-2019/05.jpg" class=""><p>time goes on, senior researchers graduated by ones and twos, leader position came to me. not having any reason to refuse it, I accepted the position. and I started to fix almost everything in HPC. especially laboratory workflow and infra. I recommended slack as the messenger and trello as the issue tracker (for kanban-board). taught members how to use git and gitlab. due to these tries, we could work together more efficiently. setting up small infra was enough for me to apply computer network techs. installing APs and setting internal route protocol, turning and using server remotely…etc. every work was associated to network theory and became a good review.</p><hr><h1 id="start-up-amp-job-hunting"><a href="#start-up-amp-job-hunting" class="headerlink" title="start-up &amp; job hunting"></a><em>start-up &amp; job hunting</em></h1><p>kept to follow those who are in game development field on twitter, I could get various information about game development things including job post. fortunately, this activity led me to get a part-time job as Unity game programming. was a beginner in Unity game programming at that time, I was hired to do small potion of works. but it was the first time that I made money with programming, I did my best on almost things and also tried to learn skills that will be required in future. the motive might be come from self-esteem and a will to give a good impression.</p><img src="/2019/12/24/retrospection-2019/06.jpg" class=""><p>at there, I developed two games and they were both for mobile platform. so I had a chance to study for mobile platform especially Android. despite Unity’s multi-platform support, there is sometimes extra work for platform specific issues. stuck in Android Studio, I suffered so many times. one of the games was about flight fight game. as only my experience about flight in game was battlefield series, I had to play some flight games such as Ace Combat series. in addition, aircraft physics was not that easy. though I thought that I am fit in this kind of job, it was not. applying theory into code is not the same level with just knowing theory. everyday I struggled for expecting what happens on aircraft physics code changes.</p><img src="/2019/12/24/retrospection-2019/07.jpg" class=""><p>after end of the part-time job, as planned, I sought for job of game programming. applied to several companies: Pearl Abyss, NC Soft, Bluehole, PUBG…etc. target position was primarily the game client programmer. continued job hunting, I could join interview many times. some of them were bad enough to fail the interview, some of them were good enough to pass the interview. by the time I engaged the 5th interview in my life, taking an interview could not bother me to relax. absolutely practice makes everything fine.</p><img src="/2019/12/24/retrospection-2019/08.jpg" class=""><p>topics on interview were similar regardless of what company is. in other words, what they want from fresh recruit like me. three main topics are below:</p><ul><li>Object Oriented Programming theory (based on cpp)<ul><li>why is it needed ?</li><li>what is virtual function and how it works ?</li><li>show me explanation of function overriding<br>…etc</li></ul></li><li>Computer Science / Engineering theory (related to game)<ul><li>what is multi-thread and race condition ?</li><li>tell me difference between mutex and semaphore</li><li>why a cube is used for view projection in graphics pipeline ?<br>…etc</li></ul></li><li>Project Experience (as a team)<ul><li>what did you think learn from the project experience ?</li><li>why did you do this (on the code / on the feature …etc) ?</li><li>talk about the most critical situation in the project and how did you overcome ?<br>…etc</li></ul></li><li><del>Work Experience</del>  😂  (but it is appealing one too…)</li></ul><hr><h1 id="uneasy-yearly-rent"><a href="#uneasy-yearly-rent" class="headerlink" title="uneasy yearly rent"></a><em>uneasy yearly rent</em></h1><p>after the hectic job hunting, I got informed of acceptances from each company. had to choose one among companies, finally I decided to join the PUBG. as Korean office of PUBG is located in Seoul, that was the time to move into Seoul ! I lived in Chungcheong-Namdo for almost whole life. born in there, graduated schools in there, even attended university in there ! these events made me wish to get out of this little world. however, the move was not that easy going.</p><p>everyone recommends you yearly rent (“전세”) to save the money. ummm, that is right answer. but you may be suffered with horrible documents and tasks for “전세” loan. a job beginner like me cannot apply the loan from bank due to lack of career. even the loan from government asks you for strict conditions. while on dealing with these difficulties, you might give up and settle to monthly rent (“월세”).</p><p>in my case, PUBG provided a fund for renting house. so I could manage to rent a small room near the office as “전세”. unless it, I also had to settle to “월세”. keep in mind that looking for a room with “전세” using any loan is a really hard work needed patience. if you have no time and no patience, just starting as “월세” is not that bad option. particularly for job beginner like me.</p><hr><h1 id="PUBG-life"><a href="#PUBG-life" class="headerlink" title="PUBG life"></a><em>PUBG life</em></h1><img src="/2019/12/24/retrospection-2019/09.jpg" class=""><p>it has been 4 months after I started a full-time job in PUBG. there were so many happenings within that short period. I cannot tell the whole stories now, but someday I will tell some of them. just now, I do contents programming for console platform PUBG. XBox One and Play Station 4 are my playground and workplace at the same time. these days I am quite good at handling game-pad, differently before. also been familiar to low-spec HW causing delay of work. ;D</p><img src="/2019/12/24/retrospection-2019/11.jpg" class=""><p>as I expected, many employees in game company are like nerd. many of them love to play games or develop games. they are knowledgeable to games than the average people. just…well…I wanted to meet these people who have these pure mind that makes games with a hope to make users be fun. the truth I can work with them made me excited. it lasted quite long time. and also game programmers are usually interested in physics things. now I am happy that have someone to talk about these subjects.</p><img src="/2019/12/24/retrospection-2019/10.jpg" class=""><p>task is not easy, but enough to challenge. almost everyday I learn something new. there are chances to conversate with foreign programmer. now I know they are usual human beings, too. their thinking is not that different from us (korean programmer), and they can either make basic faults. as a result, I met someone or something new many times, and tried to understand he/she/it. so…during the PUBG life in 2019, I think I could have developed my view to the world.</p><hr><h1 id="wrap-up"><a href="#wrap-up" class="headerlink" title="wrap up"></a><em>wrap up</em></h1><img src="/2019/12/24/retrospection-2019/13.jpg" class=""><p>this year 2019, was the hardest one to me. I had to deal with so many tasks in simultaneously such as university works, internship, job hunting, personal development project, even my job. I only wanted to focus on developing something, however, there was always something else in society life. anyway, it was successful to harvest my effort for 4 years in university. I also achieved my target: be a FPS game developer. cheers. 🍺</p><p>next year, I might be able to do these tasks below:</p><ul><li>university graduation and degree acquisition</li><li>practical and useful project about Unreal Engine</li><li>hanging out with more people</li><li>getting pretty good evaluation on peer review at work</li><li>helping the new comer to game development industry</li></ul><p>EOF.</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;overview&quot;&gt;&lt;a href=&quot;#overview&quot; class=&quot;headerlink&quot; title=&quot;overview&quot;&gt;&lt;/a&gt;&lt;em&gt;overview&lt;/em&gt;&lt;/h1&gt;&lt;img src=&quot;/2019/12/24/retrospection-2019
      
    
    </summary>
    
    
    
      <category term="Retrospection" scheme="https://baemincheon.github.io/tags/Retrospection/"/>
    
  </entry>
  
  <entry>
    <title>shared-folder-in-wsl</title>
    <link href="https://baemincheon.github.io/2019/08/19/shared-folder-in-wsl/"/>
    <id>https://baemincheon.github.io/2019/08/19/shared-folder-in-wsl/</id>
    <published>2019-08-18T15:57:29.000Z</published>
    <updated>2020-08-30T15:14:51.454Z</updated>
    
    <content type="html"><![CDATA[<ul><li>this post covers<ul><li>how to share a folder in wsl</li></ul></li><li>environment<ul><li>Windows 10 / Home</li><li>WSL / Ubuntu 18.04 LTS</li><li>Visual Studio Code</li></ul></li></ul><hr><h3 id="pre-task"><a href="#pre-task" class="headerlink" title="pre-task"></a>pre-task</h3><ul><li>install WSL in your Windows 10<ul><li>open the <code>Microsoft Store</code></li><li>search for <code>Ubuntu</code></li><li>click <code>Ubuntu 18.04 LTS</code></li><li>get and install it</li></ul></li><li>prepare the environment<ul><li>initialize your wsl</li></ul></li></ul><h3 id="make-link"><a href="#make-link" class="headerlink" title="make-link"></a>make-link</h3><img src="/2019/08/19/shared-folder-in-wsl/01.png" class=""><ul><li>make a folder in some directory on Windows<ul><li>ex) <code>D:\Code\LinuxShare</code></li></ul></li></ul><img src="/2019/08/19/shared-folder-in-wsl/02.png" class=""><ul><li>make a link in some directory on WSL<ul><li>format) <code>ln -s /mnt/[partition]/[folder...] [link-name]</code></li><li>ex) <code>ln -s /mnt/d/Code/LinuxShare share-with-windows</code></li></ul></li></ul><h3 id="make-file"><a href="#make-file" class="headerlink" title="make-file"></a>make-file</h3><img src="/2019/08/19/shared-folder-in-wsl/03.png" class=""><ul><li>make a text file on Windows side<ul><li>ex) <code>D:\Code\LinuxShare\test.txt</code></li></ul></li></ul><img src="/2019/08/19/shared-folder-in-wsl/04.png" class=""><ul><li>check out the text file on WSL side<ul><li>ex) <code>~/share-with-windows/test.txt</code></li></ul></li></ul><img src="/2019/08/19/shared-folder-in-wsl/05.png" class=""><img src="/2019/08/19/shared-folder-in-wsl/06.png" class=""><ul><li>edit the text file and save it on WSL side<ul><li>ex) <code>hello WSL !</code> → <code>hello Windows !</code></li></ul></li></ul><img src="/2019/08/19/shared-folder-in-wsl/07.png" class=""><ul><li>check out the text file on Windows side</li></ul><h3 id="typing-and-compiling"><a href="#typing-and-compiling" class="headerlink" title="typing-and-compiling"></a>typing-and-compiling</h3><img src="/2019/08/19/shared-folder-in-wsl/08.png" class=""><img src="/2019/08/19/shared-folder-in-wsl/09.png" class=""><ul><li>make a c file and edit it on Windows side<ul><li>ex) <code>D:\Code\LinuxShare\test.c</code></li></ul></li></ul><img src="/2019/08/19/shared-folder-in-wsl/10.png" class=""><ul><li>compile the c file and execute it<ul><li>ex) <code>~/share-with-windows/test.c</code></li></ul></li><li>you can now type texts on Windows and compile that on WSL</li></ul><img src="/2019/08/19/shared-folder-in-wsl/11.png" class=""><ul><li>also output file, <code>a.out</code> will be seen on Windows side</li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;ul&gt;
&lt;li&gt;this post covers&lt;ul&gt;
&lt;li&gt;how to share a folder in wsl&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;environment&lt;ul&gt;
&lt;li&gt;Windows 10 / Home&lt;/li&gt;
&lt;li&gt;WSL / Ubu
      
    
    </summary>
    
    
    
      <category term="WSL" scheme="https://baemincheon.github.io/tags/WSL/"/>
    
  </entry>
  
  <entry>
    <title>unreal-linux-server-build</title>
    <link href="https://baemincheon.github.io/2019/08/19/unreal-linux-server-build/"/>
    <id>https://baemincheon.github.io/2019/08/19/unreal-linux-server-build/</id>
    <published>2019-08-18T15:46:45.000Z</published>
    <updated>2020-08-30T15:42:20.228Z</updated>
    
    <content type="html"><![CDATA[<ul><li>recommend to read first<ul><li><a href="https://baemincheon.github.io/2019/08/06/what-is-unreal-build-target/">what-is-unreal-build-target</a></li><li><a href="https://baemincheon.github.io/2019/08/11/custom-unreal-engine-build/">custom-unreal-engine-build</a></li><li><a href="https://baemincheon.github.io/2019/08/16/differences-of-unreal-build-targets/">differences-of-unreal-build-targets</a></li></ul></li><li>this post covers<ul><li>how to setup cross compile environment</li><li>how to build linux server</li><li>how to use client and server in cross platform</li></ul></li><li>environment<ul><li>Windows / 10</li><li>Visual Studio IDE / 2017 Community</li><li>Unreal Engine / 4.21 Built From Source Code</li></ul></li></ul><hr><h1 id="overview"><a href="#overview" class="headerlink" title="overview"></a>overview</h1><ul><li>if you want to seperate the game into client and server<ul><li>mostly, the clients would be executed on windows</li><li>as the server is up to you, you can select more efficient option<ul><li>in aws, linux server instead of windows to save cost</li></ul></li></ul></li><li>so it is needed to build linux server, but you can use cross compilation<ul><li>this makes you can build linux server on windows</li></ul></li><li>in this post, I suppose you have already an unreal engine built from source code and test project<ul><li>especially, I used 4.21 version</li></ul></li></ul><h1 id="setup"><a href="#setup" class="headerlink" title="setup"></a>setup</h1><ul><li>download the proper toolchain from <a href="https://docs.unrealengine.com/en-US/Platforms/Linux/GettingStarted/index.html" target="_blank" rel="noopener">this document</a><ul><li>in my case, <code>clang-6.0.1-based</code> toolchain is needed</li></ul></li><li>execute the toolchain installer<ul><li>you do not have to do extra works when your engine version is equal to or over 4.14</li><li>if not, reference the document mentioned for the details</li></ul></li></ul><img src="/2019/08/19/unreal-linux-server-build/01.jpg" class=""><ul><li>in the test project, edit the <code>DefaultEngine.ini</code> of <code>[ProjectRoot]/Config/DefaultEngine.ini</code><ul><li>add the code below</li><li>the code will add configurations for linux version build</li></ul></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[&#x2F;Script&#x2F;LinuxTargetPlatform.LinuxTargetSettings]</span><br><span class="line">TargetArchitecture&#x3D;X86_64UnknownLinuxGnu</span><br></pre></td></tr></table></figure><img src="/2019/08/19/unreal-linux-server-build/02.jpg" class=""><ul><li>right click <code>uproject</code> and select <code>Generate Visual Studio project files</code><ul><li>open <code>sln</code> and build the test project with <code>Development Editor &amp; Win64</code></li></ul></li></ul><h1 id="build"><a href="#build" class="headerlink" title="build"></a>build</h1><img src="/2019/08/19/unreal-linux-server-build/03.jpg" class=""><ul><li>double click <code>uproject</code> and you would see the test project on unreal editor</li></ul><img src="/2019/08/19/unreal-linux-server-build/04.jpg" class=""><ul><li>select <code>Development</code> in <code>File/Package Project/Build Configuration</code></li></ul><img src="/2019/08/19/unreal-linux-server-build/05.jpg" class=""><ul><li>select <code>Linux</code> in <code>File/Package Project</code><ul><li>choose an arbitrary directory for saving the package</li><li>in my case, I created <code>Packages</code> folder in project directory and use it</li></ul></li></ul><img src="/2019/08/19/unreal-linux-server-build/06.jpg" class=""><ul><li>after packaging, you can see the directory like this</li></ul><img src="/2019/08/19/unreal-linux-server-build/07.jpg" class=""><ul><li>open <code>sln</code> and build the test project with <code>Development Server &amp; Linux</code></li></ul><img src="/2019/08/19/unreal-linux-server-build/08.jpg" class=""><ul><li>you can see the <code>[ProjectName]Server</code> build, which will be executed on linux</li></ul><img src="/2019/08/19/unreal-linux-server-build/09.jpg" class=""><ul><li>copy the <code>[ProjectName]Server</code> into package binary folder<ul><li>now you can execute <code>[ProjectName]Server</code> on linux</li></ul></li></ul><h1 id="usage"><a href="#usage" class="headerlink" title="usage"></a>usage</h1><ul><li>in this post, I will show you an example with wsl<ul><li>I recommend to make shared folder for sharing files</li><li>if you do not know about it, read <a href="https://baemincheon.github.io/2019/08/19/shared-folder-in-wsl/">this post</a></li></ul></li></ul><img src="/2019/08/19/unreal-linux-server-build/10.jpg" class=""><ul><li>I used a shared folder called <code>LinuxShare</code> for sharing the package files</li></ul><img src="/2019/08/19/unreal-linux-server-build/11.jpg" class=""><ul><li>there are build files in package binary folder<ul><li><code>[ProjectName]</code> is build file from <code>Game</code> build target, which cannot be executed for absense of graphics api</li><li><code>[ProjectName]Server</code> is build file from <code>Server</code> build target, which is copied by you</li></ul></li></ul><img src="/2019/08/19/unreal-linux-server-build/12.jpg" class=""><img src="/2019/08/19/unreal-linux-server-build/13.jpg" class=""><ul><li>execute server build with option <code>127.0.0.1 -log</code> on wsl(linux)</li></ul><img src="/2019/08/19/unreal-linux-server-build/14.jpg" class=""><ul><li>execute client build twice with option <code>127.0.0.1 -log -windowed resx=720 resy=480</code> on windows<ul><li>you can see the same result that we saw in previous post</li></ul></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;ul&gt;
&lt;li&gt;recommend to read first&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://baemincheon.github.io/2019/08/06/what-is-unreal-build-target/&quot;&gt;what-is-unreal-buil
      
    
    </summary>
    
    
    
      <category term="UnrealEngine" scheme="https://baemincheon.github.io/tags/UnrealEngine/"/>
    
      <category term="Linux" scheme="https://baemincheon.github.io/tags/Linux/"/>
    
      <category term="WSL" scheme="https://baemincheon.github.io/tags/WSL/"/>
    
  </entry>
  
  <entry>
    <title>differences-of-unreal-build-targets</title>
    <link href="https://baemincheon.github.io/2019/08/16/differences-of-unreal-build-targets/"/>
    <id>https://baemincheon.github.io/2019/08/16/differences-of-unreal-build-targets/</id>
    <published>2019-08-15T15:13:26.000Z</published>
    <updated>2020-08-30T15:41:59.068Z</updated>
    
    <content type="html"><![CDATA[<ul><li>recommend to read first<ul><li><a href="https://baemincheon.github.io/2019/08/06/what-is-unreal-build-target/">what-is-unreal-build-target</a></li><li><a href="https://baemincheon.github.io/2019/08/11/custom-unreal-engine-build/">custom-unreal-engine-build</a></li></ul></li><li>this post covers<ul><li>what does mean each build target</li><li>how to use each build target</li><li>differences of some build targets</li></ul></li><li>environment<ul><li>Windows / 10</li><li>Visual Studio IDE / 2017 Community</li></ul></li></ul><hr><h1 id="overview"><a href="#overview" class="headerlink" title="overview"></a>overview</h1><ul><li>I suppose you already have the unreal engine built from source of 4.21 version<ul><li>if you do not, read the <code>custom-unreal-engine-build</code> post</li></ul></li></ul><img src="/2019/08/16/differences-of-unreal-build-targets/02.jpg" class=""><ul><li>once you build the <code>UE4</code> project with option <code>Development Editor &amp; Win64</code><ul><li>you can find <code>[EngineRoot]/Engine/Binaries/Win64/UE4Editor.exe</code> and execute it</li></ul></li></ul><img src="/2019/08/16/differences-of-unreal-build-targets/01.jpg" class=""><ul><li>in this window, you can create project using your custom engine<ul><li>create a <code>Third Person</code> template project for testing several build targets in this post</li></ul></li></ul><h1 id="build-targets"><a href="#build-targets" class="headerlink" title="build-targets"></a>build-targets</h1><img src="/2019/08/16/differences-of-unreal-build-targets/12.jpg" class=""><ul><li>in unreal engine, “build (file)” means the executable file or library file made from source code<ul><li>ex1) <code>UE4Editor-[ProjectName].dll</code> of <code>Editor</code> build target</li><li>ex2) <code>[ProjectName]Client.exe</code> of <code>Client</code> build target</li><li>ex3) <code>[ProjectName].exe</code> of <code>Game</code> build target</li></ul></li><li>there are four build targets frequently used<ul><li>Client</li><li>Server</li><li>Game</li><li>Editor</li></ul></li></ul><ul><li><code>Client</code><ul><li>this target is used for building only client</li><li>it has several features especially displaying screen</li><li>so if the system does not have any graphics API, it cannot be executed</li></ul></li></ul><ul><li><code>Server</code><ul><li>this target is used for building only server</li><li>it does not have several features especially displaying screen</li><li>so regardless of graphics API, it can be executed</li></ul></li></ul><ul><li><code>Game</code><ul><li>this target is used for building whole game</li><li>it has all features from <code>Client</code> and <code>Server</code> targets</li><li>so a build from this target can be used as client, and server too<ul><li>it is not recommended for the commercial game project because user could get the server feature</li></ul></li></ul></li></ul><ul><li><code>Editor</code><ul><li>this target is used for executing the game on unreal editor</li><li>only the build from this target can be opened in unreal editor<ul><li>also, unreal editor only can open this build, which means packaging impossible</li></ul></li><li>totally, it has all features from <code>Game</code></li></ul></li></ul><h1 id="packaging"><a href="#packaging" class="headerlink" title="packaging"></a>packaging</h1><ul><li>because build files do not contain unreal assets, it cannot be executed alone<ul><li>we have checked out what happens when only using a build file in previous post</li><li>so, executing the game from any build file, you need to package unreal assets used in the project file</li><li>and packaging can be done in unreal editor, not the source code editor such as visual studio IDE</li></ul></li><li>there are some prerequisites for pacakaging the test project</li></ul><img src="/2019/08/16/differences-of-unreal-build-targets/08.jpg" class=""><ul><li>open the <code>sln</code> for the test project and build it with <code>Development Editor &amp; Win64</code><ul><li>and press <code>F5</code> to start debugging</li></ul></li></ul><img src="/2019/08/16/differences-of-unreal-build-targets/09.jpg" class=""><ul><li>you would see the <code>Third Person</code> default map with unreal editor</li></ul><img src="/2019/08/16/differences-of-unreal-build-targets/10.jpg" class=""><ul><li>open the <code>Project Settings</code> window and find <code>Maps &amp; Modes</code> tab<ul><li>set every map with the default map</li></ul></li></ul><img src="/2019/08/16/differences-of-unreal-build-targets/11.jpg" class=""><ul><li>find <code>Packaging</code> tab<ul><li>add the default map to the <code>List of maps to include in a packaged build</code></li></ul></li></ul><img src="/2019/08/16/differences-of-unreal-build-targets/06.jpg" class=""><img src="/2019/08/16/differences-of-unreal-build-targets/13.jpg" class=""><ul><li>write target config files for <code>Client</code> and <code>Server</code> targets</li></ul><img src="/2019/08/16/differences-of-unreal-build-targets/07.jpg" class=""><ul><li>right click <code>uproject</code> and select <code>Generate project files</code></li></ul><ul><li>re-open the <code>sln</code> and build the test project with each solution configuration<ul><li><code>Development &amp; Win64</code></li><li><code>Development Client &amp; Win64</code></li><li><code>Development Server &amp; Win64</code></li></ul></li></ul><img src="/2019/08/16/differences-of-unreal-build-targets/14.jpg" class=""><ul><li>now you can see the three build files</li></ul><ul><li>open the test project with unreal editor<ul><li>way1) double click <code>uproject</code></li><li>way2) execute <code>[EngineRoot]/Engine/Binaries/Win64/UE4Editor.exe</code> and select the project</li></ul></li></ul><img src="/2019/08/16/differences-of-unreal-build-targets/15.jpg" class=""><ul><li>select <code>Development</code> in <code>File/Package Project/Build Configuration</code></li></ul><img src="/2019/08/16/differences-of-unreal-build-targets/16.jpg" class=""><img src="/2019/08/16/differences-of-unreal-build-targets/17.jpg" class=""><ul><li>select <code>Windows (64-bit)</code> in <code>File/Package Project/Windows</code><ul><li>choose an arbitrary directory for saving the package</li><li>in my case, I created <code>Packages</code> folder in project directory and use it</li></ul></li></ul><img src="/2019/08/16/differences-of-unreal-build-targets/18.jpg" class=""><ul><li>after packaging, you can see the directory like this</li></ul><img src="/2019/08/16/differences-of-unreal-build-targets/19.jpg" class=""><ul><li>as we packaged the project with <code>Development</code> the executable files are the same</li></ul><img src="/2019/08/16/differences-of-unreal-build-targets/20.jpg" class=""><ul><li>copy the build files into the <code>Packages/WindowsNoEditor/[ProjectName]/Binaries/Win64</code><ul><li><code>[ProjectName].exe</code></li><li><code>[ProjectName]Client.exe</code></li><li><code>[ProjectName]Server.exe</code></li></ul></li></ul><img src="/2019/08/16/differences-of-unreal-build-targets/21.jpg" class=""><ul><li>run the command prompt and move to the <code>Packages/WindowsNoEditor/[ProjectName]/Binaries/Win64</code><ul><li>execute each build file with some options for knowing what happens inside</li></ul></li></ul><img src="/2019/08/16/differences-of-unreal-build-targets/22.jpg" class=""><img src="/2019/08/16/differences-of-unreal-build-targets/23.jpg" class=""><ul><li>execute <code>Game</code> build file with options <code>-log -windowed resx=720 resy=480</code><ul><li><code>-log</code> option makes the game print logs</li><li><code>-windowed</code> option prevents the game from running as full-screen</li></ul></li><li>you can terminate the game<ul><li>way1) click <code>X</code> on the right of game window</li><li>way2) press a <a href="https://en.wikipedia.org/wiki/Grave_accent" target="_blank" rel="noopener">grave accent</a> and type <code>exit</code></li></ul></li></ul><img src="/2019/08/16/differences-of-unreal-build-targets/24.jpg" class=""><ul><li>execute <code>Client</code> build file with options <code>-log -windowed resx=720 resy=480</code><ul><li>you can see the same result of <code>Game</code> build</li></ul></li></ul><img src="/2019/08/16/differences-of-unreal-build-targets/25.jpg" class=""><ul><li>execute <code>Server</code> build file with options <code>-log</code><ul><li>you can see there is no game screen with <code>Server</code> build</li></ul></li></ul><h1 id="game-client-server"><a href="#game-client-server" class="headerlink" title="game-client-server"></a>game-client-server</h1><ul><li>I mentioned <code>Game</code> as “it has all features from <code>Client</code> and <code>Server</code> targets”</li></ul><ul><li>execute <code>Game</code> build 3 times with options below<ul><li>1) <code>-server 127.0.0.1 -log -windowed resx=720 resy=480</code></li><li>2) <code>127.0.0.1 -log -windowed resx=720 resy=480</code></li><li>3) <code>127.0.0.1 -log -windowed resx=720 resy=480</code></li></ul></li></ul><img src="/2019/08/16/differences-of-unreal-build-targets/26.jpg" class=""><ul><li>the first game acts as (client + server) and other games act as client<ul><li>this means <code>Game target = Client target + Server target</code></li></ul></li></ul><ul><li>execute <code>Server</code> build with options below<ul><li><code>127.0.0.1 -log</code></li></ul></li><li>execute <code>Client</code> twice with options below<ul><li>1) <code>127.0.0.1 -log -windowed resx=720 resy=480</code></li><li>2) <code>127.0.0.1 -log -windowed resx=720 resy=480</code></li></ul></li></ul><img src="/2019/08/16/differences-of-unreal-build-targets/27.jpg" class=""><ul><li>the first game acts as server and other games act as client<ul><li>you can see server do not have a screen</li></ul></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;ul&gt;
&lt;li&gt;recommend to read first&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://baemincheon.github.io/2019/08/06/what-is-unreal-build-target/&quot;&gt;what-is-unreal-buil
      
    
    </summary>
    
    
    
      <category term="UnrealEngine" scheme="https://baemincheon.github.io/tags/UnrealEngine/"/>
    
  </entry>
  
  <entry>
    <title>custom-unreal-engine-build</title>
    <link href="https://baemincheon.github.io/2019/08/11/custom-unreal-engine-build/"/>
    <id>https://baemincheon.github.io/2019/08/11/custom-unreal-engine-build/</id>
    <published>2019-08-11T05:50:32.000Z</published>
    <updated>2020-08-30T15:40:53.175Z</updated>
    
    <content type="html"><![CDATA[<ul><li>recommend to read first<ul><li><a href="https://baemincheon.github.io/2019/08/06/what-is-unreal-build-target/">what-is-unreal-build-target</a></li></ul></li><li>this post covers<ul><li>why we need the custom unreal engine</li><li>how to access to unreal engine code</li><li>how to build and configure our custom unreal engine</li></ul></li><li>environment<ul><li>Windows / 10</li><li>Visual Studio IDE / 2017 Community</li></ul></li></ul><hr><h1 id="overview"><a href="#overview" class="headerlink" title="overview"></a>overview</h1><ul><li>using unreal engine with the <code>Epic Games Launcher</code> means that you can use some parts of unreal engine<ul><li>because, engines provided from <code>Epic Games Launcher</code> are lack of some features ( find more at <a href="https://answers.unrealengine.com/questions/39658/differences-between-github-and-unreal-download.html" target="_blank" rel="noopener">here</a> )</li><li>especially, you can only use <code>Client</code> and <code>Server</code> build target with custom unreal engine</li></ul></li></ul><img src="/2019/08/11/custom-unreal-engine-build/01.jpg" class=""><ul><li>if you want to use whole of unreal engine, you need to build unreal engine from source code<ul><li>making a project with custom engine, <code>Epic Games Launcher</code> recognizes the project but not the version of engine</li><li>you can see the <code>Other</code> on the screenshot above, which means that versioning is not meaningful no more</li></ul></li><li>for example, suppose you need to seperate your game project into client and server<ul><li>that means, client version of your game only has the feature for client and <em>vice versa</em></li><li>build targets supported by engine from <code>Epic Games Launcher</code> are only <code>Game</code> and <code>Editor</code> so you cannot</li></ul></li></ul><img src="/2019/08/11/custom-unreal-engine-build/02.jpg" class=""><h1 id="access"><a href="#access" class="headerlink" title="access"></a>access</h1><ul><li>accessing to unreal engine repository needs some process below</li><li>visit <a href="https://www.unrealengine.com/en-US/?lang=en-US" target="_blank" rel="noopener">epic games page</a> and sign in</li></ul><img src="/2019/08/11/custom-unreal-engine-build/03.jpg" class=""><img src="/2019/08/11/custom-unreal-engine-build/04.jpg" class=""><ul><li>click <code>PERSONAL</code> in the combo box on your nickname and click <code>CONNECTED ACCOUNTS</code><ul><li>click <code>CONNECT</code> in the <code>GITHUB</code> box and sign in with your github account</li><li>then, some mails would be sent to your email and accept them</li></ul></li></ul><img src="/2019/08/11/custom-unreal-engine-build/05.jpg" class=""><ul><li>now you can find that you have entered the <code>Epic Games</code> organization</li></ul><img src="/2019/08/11/custom-unreal-engine-build/06.jpg" class=""><ul><li>visit the unreal engine repository and download or clone it</li></ul><img src="/2019/08/11/custom-unreal-engine-build/08.jpg" class=""><ul><li>if you want to make custom engine based on a specific version, select the proper branch</li></ul><img src="/2019/08/11/custom-unreal-engine-build/07.jpg" class=""><ul><li>now you are ready to build custom engine</li></ul><h1 id="build"><a href="#build" class="headerlink" title="build"></a>build</h1><ul><li>before starting, there are some requirements to visual studio IDE</li></ul><img src="/2019/08/11/custom-unreal-engine-build/09.jpg" class=""><ul><li>execute visual studio 2017 and click <code>Tools/Get Tools and Features...</code><ul><li>in <code>Individual components</code> tab, you should check the components below<ul><li><code>.NET Framework 4.5</code> things</li><li><code>.NET Framework 4.6</code> things</li><li><code>VC++ 2015 for desktop</code> things</li></ul></li></ul></li></ul><img src="/2019/08/11/custom-unreal-engine-build/10.jpg" class=""><ul><li>right click the <code>Setup.bat</code> in engine root folder and select <code>Run as administrator</code></li></ul><img src="/2019/08/11/custom-unreal-engine-build/11.jpg" class=""><ul><li>execute command prompt and move to engine root folder<ul><li>type <code>GenerateProjectFiles.bat -2017</code> and enter</li><li>now you can see <code>UE4.sln</code> is generated and open it with visual studio 2017</li></ul></li></ul><img src="/2019/08/11/custom-unreal-engine-build/12.jpg" class=""><ul><li>right click <code>UE4</code> project and select build<ul><li>it takes soooo long time ( about 1~2 hours )</li></ul></li></ul><h1 id="usage"><a href="#usage" class="headerlink" title="usage"></a>usage</h1><ul><li>launch any engine on <code>Epic Games Launcher</code></li></ul><img src="/2019/08/11/custom-unreal-engine-build/13.jpg" class=""><ul><li>create some project</li></ul><img src="/2019/08/11/custom-unreal-engine-build/14.jpg" class=""><ul><li>right click <code>uproject</code> and select <code>Switch Unreal Engine version...</code></li></ul><img src="/2019/08/11/custom-unreal-engine-build/15.jpg" class=""><ul><li>if the build was successfully done, there is the engine root in combo box<ul><li>if not, find and choose the engine root directory</li></ul></li></ul><img src="/2019/08/11/custom-unreal-engine-build/16.jpg" class=""><ul><li>select proper one and it starts generating project files</li></ul><img src="/2019/08/11/custom-unreal-engine-build/17.jpg" class=""><ul><li>open the <code>[ProjectName].sln</code> and you can check out the <code>UE4</code> in solution explorer</li></ul><img src="/2019/08/11/custom-unreal-engine-build/18.jpg" class=""><ul><li>even you would find the <code>Client</code> and <code>Server</code> options in solution configurations<ul><li>this process is required whenever you want to use custom engine</li><li>hooh ! now you can use your own custom unreal engine !</li></ul></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;ul&gt;
&lt;li&gt;recommend to read first&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://baemincheon.github.io/2019/08/06/what-is-unreal-build-target/&quot;&gt;what-is-unreal-buil
      
    
    </summary>
    
    
    
      <category term="UnrealEngine" scheme="https://baemincheon.github.io/tags/UnrealEngine/"/>
    
  </entry>
  
  <entry>
    <title>what-is-unreal-build-target</title>
    <link href="https://baemincheon.github.io/2019/08/06/what-is-unreal-build-target/"/>
    <id>https://baemincheon.github.io/2019/08/06/what-is-unreal-build-target/</id>
    <published>2019-08-06T14:49:20.000Z</published>
    <updated>2020-08-30T15:42:27.547Z</updated>
    
    <content type="html"><![CDATA[<ul><li>this post covers<ul><li>what is the build target in unreal engine</li><li>why we need the several build targets</li></ul></li><li>environment<ul><li>Windows / 10</li><li>Unreal Engine / 4.19.2</li><li>Visual Studio IDE / 2017 Community</li></ul></li></ul><hr><h3 id="overview"><a href="#overview" class="headerlink" title="overview"></a>overview</h3><img src="/2019/08/06/what-is-unreal-build-target/01.jpg" class=""><ul><li>create new project with <code>Basic Code</code> in cpp tab</li></ul><img src="/2019/08/06/what-is-unreal-build-target/02.jpg" class=""><ul><li>then you can see the directory like this</li></ul><img src="/2019/08/06/what-is-unreal-build-target/03.jpg" class=""><ul><li>open the <code>[ProjectName].sln</code> and check out the csharp files whose name are ending up with <code>Target.cs</code></li><li>now you may wonder…<ul><li>what the <code>Type = TargetType.Game</code> means</li><li>what the heck is <code>UnrealBuildTool</code></li><li>what is difference between <code>[ProjectName]Target</code> and <code>[ProjectName]EditorTarget</code></li></ul></li><li>do not hurry, first of all, we gonna learn about the build targets</li></ul><h3 id="solution-configuration"><a href="#solution-configuration" class="headerlink" title="solution-configuration"></a>solution-configuration</h3><img src="/2019/08/06/what-is-unreal-build-target/04.jpg" class=""><ul><li>most of you may have developed the game with no manipulation of <code>Solution Configurations</code></li></ul><img src="/2019/08/06/what-is-unreal-build-target/05.jpg" class=""><ul><li>when you folds it out, there are several options and each option is explained in <a href="https://docs.unrealengine.com/en-US/Programming/Development/BuildConfigurations/index.html" target="_blank" rel="noopener">this document</a> detailed<ul><li><code>DebugGame</code> and <code>Development</code> : build output is stand-alone binary file, which has <code>exe</code> extension</li><li><code>DebugGame Editor</code> and <code>Development Editor</code> : build output is dynamic link library, which has <code>dll</code> extension</li><li><code>Shipping</code> : build output is stand-alone binary file, which has <code>exe</code> extension</li></ul></li><li>the difference between<ul><li><code>DebugGame</code> and <code>Development</code> : the level and depth of debugging features</li><li><code>DebugGame</code>, <code>Development</code> and <code>Shipping</code> : output of <code>Shipping</code> is more optimized for the reason of absence of command prompt and screen debug, etc. but, having no assets for the level presentation, both cannot be executed normally</li></ul></li></ul><img src="/2019/08/06/what-is-unreal-build-target/06.jpg" class=""><h3 id="build-target"><a href="#build-target" class="headerlink" title="build-target"></a>build-target</h3><ul><li>yep, you have seen the <code>Solution Configurations</code> and what they do</li><li>and there is the way to change the behavior of each configuration by editing the <code>Target.cs</code> files</li></ul><img src="/2019/08/06/what-is-unreal-build-target/07.jpg" class=""><ul><li>let us change the text <code>Editor</code> into <code>Game</code> in <code>[ProjectName]Editor.Target.cs</code></li></ul><img src="/2019/08/06/what-is-unreal-build-target/08.jpg" class=""><ul><li>remove the <code>Binaries</code> folder for checking the build output</li></ul><img src="/2019/08/06/what-is-unreal-build-target/09.jpg" class=""><ul><li>build our project with <code>Development Editor</code></li></ul><img src="/2019/08/06/what-is-unreal-build-target/10.jpg" class=""><ul><li><p>look at the build output, what happened ? exe file has been generated, not the dll</p></li><li><p>okay, now I would think it is time to tell you how the build works</p><ul><li>when you select <code>DebugGame</code> or <code>Development</code>, unreal engine does the build based on <code>[ProjectName].Target.cs</code></li><li>also, when you select <code>DebugGame Editor</code> or <code>Development Editor</code>, unreal engine will build based on <code>[ProjectName]Editor.Target.cs</code></li><li>and the <code>Type</code> in <code>Target.cs</code> file is a key value of build configuration, which is read by UnrealBuildTool</li></ul></li></ul><img src="/2019/08/06/what-is-unreal-build-target/11.jpg" class=""><ul><li>as a result, there is no significant difference except for the file names<ul><li>first 5 files are built with <code>Development</code> and <code>Test419.Target.cs</code> with <code>Type = TargetType.Game</code></li><li>later 5 files are built with <code>Development Editor</code> and <code>Test419Editor.Target.cs</code> with <code>Type = TargetType.Game</code></li></ul></li></ul><h3 id="why-it-needed"><a href="#why-it-needed" class="headerlink" title="why-it-needed"></a>why-it-needed</h3><ul><li>this structure can help you customize build configurations<ul><li>if you need to build for several enviroments, take care of the target files</li><li>there are many options not only <code>Type</code> value, find at <a href="https://docs.unrealengine.com/en-US/Programming/BuildTools/UnrealBuildTool/TargetFiles/index.html" target="_blank" rel="noopener">this document</a></li></ul></li><li>typically, the target file is used for building an unreal server<ul><li>at that time, we will use <code>[ProjectName]Server.Target.cs</code> with <code>Type = TargetType.Server</code></li><li>because, in the production level, we need a server executing unreal dedicated server</li></ul></li></ul><h3 id="further"><a href="#further" class="headerlink" title="further"></a>further</h3><ul><li>I will write about unreal server build and combination with aws game lift</li><li>in the following contents, this post should be useful for you</li><li>there is <a href="https://answers.unrealengine.com/questions/194712/differences-between-build-configurations.html" target="_blank" rel="noopener">a good QnA</a> for these subjects</li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;ul&gt;
&lt;li&gt;this post covers&lt;ul&gt;
&lt;li&gt;what is the build target in unreal engine&lt;/li&gt;
&lt;li&gt;why we need the several build targets&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;

      
    
    </summary>
    
    
    
      <category term="UnrealEngine" scheme="https://baemincheon.github.io/tags/UnrealEngine/"/>
    
  </entry>
  
</feed>
